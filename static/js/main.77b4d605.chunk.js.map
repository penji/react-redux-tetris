{"version":3,"sources":["resource/switch.png","resource/pause.png","resource/play.png","model/Tetromino.js","theme/index.js","theme/BASE.js","component/controller/buttons.js","action/game.js","component/controller/Controller.js","component/infoboard/Counter.js","component/infoboard/components.js","component/block/Cell.js","component/block/NextBlock.js","component/infoboard/NextBlocks.js","component/infoboard/InfoBoard.js","component/block/Block.js","component/blockboard/BlockBoard.js","component/Message.js","component/GameOverBoard.js","component/Combo.js","component/MainFrame.js","GlobalStyle.js","App.js","serviceWorker.js","util/util.js","action/controller.js","action/pageState.js","reducer/pageState.js","reducer/controller.js","action/block.js","reducer/block.js","reducer/game.js","reducer/index.js","saga/pageState.js","saga/controller.js","saga/game/playing.js","saga/game/game.js","saga/index.js","store/index.js","store/storageAvailable.js","index.js"],"names":["module","exports","BLOCK","NORMAL_TYPES","Tetromino","maxRotate","rotate","0","shape","w","h","dx","dy","1","2","3","BASE","MainFrame","background","block","Block","Cell","mapTypeToColor","blackboard","BlackBoard","controller","buttons","Move","normal","shadowNormal","active","shadowActive","SpaceBtn","Controller","infoboard","components","Title","fontSize","color","Value","Counter","InfoBoard","NextBlocks","borderColor","Message","StartMessage","PauseMessage","GameOverBoard","Score","Combo","Base","styled","button","theme","defaultProps","inversed","UpBtn","DownBtn","LeftBtn","RightBtn","SwitchBtn","SwitchPNG","PauseResumeToggleBtn","paused","PlayPNG","PausePNG","touch","Up","type","pressed","onMouseTouchEvent","className","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","Down","Left","Right","Space","Switch","PauseResumeToggle","gameAction","createActions","undefined","user","highScoreUpdated","payload","speed","StyledDiv","div","props","changeButtonState","state","connect","game","dispatch","action","StyledCountUp","CountUp","begin","start","this","end","value","useEasing","separator","duration","prevProps","prevState","snapshot","setState","Component","Label","label","Div","HighScore","score","high","LastScore","last","NowScore","now","Speed","Wrapper","Row","NextBlock","style","map","row","y","key","cellType","x","Board","Table","table","next","nextArr","slice","i","playing","targetShape","blockProps","length","hidden","BlockBoard","board","gameState","t","blink","keyframes","StartMsgLb","PauseMsgLb","GameOverTitle","move","show","timer","combo","clearTimeout","setTimeout","line","Scalable","frameWidth","frameHeight","frameScale","resizeTimer","BASE_SIZE","onResize","bind","onResizeDebounced","scale","window","addEventListener","removeEventListener","newScale","changeState","width","height","ratio","innerWidth","innerHeight","windowRatio","GlobalStyle","createGlobalStyle","App","Fragment","Boolean","location","hostname","match","makeCombineActionType","actionCreators","combineActions","apply","Object","values","PAGE_STATE","ACTIVE","PASSIVE","HIDDEN","pageStateAction","pageState","lifecycle","handleAction","old","actionMap","buttonAction","idx","lastIndexOf","newState","DOWN","LEFT","RIGHT","ROTATE","DROP","blockAction","blocks","randomBlocks","push","splice","Math","floor","random","rows","Array","isArray","down","left","right","defaultState","defaultValue","fill","getClearBoard","committed","cachedCollisionCheck","getDropPositionY","maxK","jx","iy","k","handleActions","actionType","boardWidth","boardHeight","collisionCheck","update","$set","nextNow","newDx","newDy","collapsed","nextRotate","cx","cy","ty","_shape","_w","_h","isBefore","result","rotateCollisionCheck","$push","newBlock","newNow","$splice","updateObj","rowClearedBoard","includes","unshift","ready","gameIsOn","resumed","gameOver","mapActionToState","toMerged","fromUser","$merge","all","combineReducers","pageStateSaga","takeEventNames","makelifeCycleChannel","eventChannel","emit","handler","event","call","chan","put","take","cancelled","close","keyboardSaga","keyboardEvents","KEYCODE_BUTTON_MAP","38","40","37","39","32","13","makeKeyboardChannel","throttled","e","throttledHandler","keyCode","which","eventName","handleInput","blockMovePhase","timeoutDown","isPaused","mapInputToAction","race","v","filter","timeoutMs","fork","inputTask","delay","raceResult","cancel","select","bY","nY","pushNext","asyncTask","_race","pauseToggle","firstTimeoutDownFail","isDropped","normalTimeoutMs","pow","commitTimeoutMs","min","nowTimeoutMs","timeoutDownFailCount","elapsedToCommit","shiftNext","Date","getTime","commit","clearLineArr","some","scoreState","blockScore","finalScore","rowClear","nowSpeed","onReady","onGame","onGameover","clear","takeEvery","inversePositionFalse","lastNowScore","gameSaga","storage","setItem","removeItem","DOMException","code","name","storageAvailable","localKey","localStorage","getItem","keys","Storage","setConfig","storage_type","local_key","enhancer","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","saveState","store","createStore","rootReducer","loadState","run","rootSaga","render","document","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.77b4d605.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAHgCAMAAABKCk6nAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACcFBMVEUAAAD////r8PDr8fHs8PDr8PDs8fHs7/Hs8PHt8PHs8PHs8PHs8PHs8PHs8PHs8PHs8PHs8PHs8fHr8fHt8vLm5ubu7u7s7/Ls7/Hs8PHs8PHs8PHs8PHs8PHr8fHj4//s7/Ht7/Hs8PHs8PHs8fHo6Ojs7Pbr8fHs8PHs8PLp9PTt7e3s8fHs8PHr7/Hr7vLs8PHr8PHt8fHy8vLs8PDs8PHp8PDt7/H////t8fHs8PHr8fHt8/Ps8fHs8PDt8fHb///w8PDs8PHs8PDv7+/s8PHs8PHr8PDw8PDs8fHs8PLr8vLs8PHs8PHr8PL////t7/Lr8PLf///s8fHs8PHt8PLs8fHr7/Lt8PHs7/Ht7e3u7vPs8PH////s8PHu7vTr8PLt8fHt8PDs7/Hn8/Ps8PLr8PD////r8PHt8fHs8/Ps8PHs8PHs8PDr8vLs8PHq7/Pv7+/r8fHs8PDs7/Ls8fHt8PDr6+vs8PHt8PDt7e3s8PHt7fPs8PHt8PDs8PLs8PDs8vLs8PDx8fHs8fHq6urs8PDs7/Lr7/Hs8PDy8vLs8PHs8PLs7/Ht8PDu7u7r8PDo8/Pr8PHv7+/////t8PDt8PDt8PDr7+/s7+/s8PDr8PDt8PHs8PHu8fHq8fHs8PLs8PDs7/Hs8PDr8PLt7/Hr8PHp7+/s8PHs8PLt8fHs8PLq9PTu8vLr8vLq7vLs8PHr7/Hp8PDr8PHu7u7t8PHs8fHs8PLs8fHt8PLs8PHs8PDs8PHs8PLt7/Lr8fHt8PLs8fHt8fHs7/Hs8PDs8PDs8PDs8PHs7/Hs8PHs8PHs8PHs7/Hs8PDs8PEAAACk1nnsAAAAznRSTlMABjJZe5yyxdnd7O7y+OjYybh8WzkKD1CRzvr7zZVaCV60+fewCxuO74gXDpDzgE3i3kgTr6UibwI46cMqN/Z/ByHbQxDX/psRoL4m4fV1BHLRCOX9mWxOz7MdLPEDxi3QR1aiFYdmAbfCKfTaQifnPh9Ld082VA3gVxzwK9xFqsAo0xI1DORRxEQU7b/mVR40FrYgBVNGwUFS0jO130kkdp6jiXRxqS+E4329GDtMPbyCI6gupm2FoZrMrrmrYViY1H6kaZ2typOW1vzVefoH2KAAAAABYktHRACIBR1IAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wEMEhgEsWZ+2gAADkBJREFUeNrt3Yt/1mUZx/EBGsxxKAId24rRgpjEYmBxkrW2ejJorbEhjFOTGYYoEGtozrEBCVMYKg2GHCxLO5iVZqV2suycdf1NDXhZA8Z4Dvd1X4f7+/kDfD33/X4J+vx+z3UVFRXShImTbrn1fZOnFN9WUlIylS43rWT6jPd/4NaZH5w1u6B/NhLu9jtK55TReJVXfOjDt0t/TJRXcyvnfYSyqeqjk+ZLf1iUaws+VpKV7pUWVt8p/YFRLi36+LQceC+1uAZ/HdvpE0ty5L1U7VLpj42ya9ldefBe6pP4c9pCn5qRp+/IX8XLV0h/enSzVq7K23ek1XdLf340fmvqCvElmvbpeukjoHH6zPTCfEdqaJQ+BLphn/1cwb5Emc/fI30OdIO+EMB3pOmV0gdBY9aYCQNMtHad9FnQ9c3+YihfoqYvNUsfB13bl8P5jtSyRvo86OrWtwYFprYNi6SPhEZ3b1jfkZZslD4TGtWm4MBE7ZulT4XeawuDL9HW5dukD4auVM0CTLT9K9InQ5frYAKm8lK80aOgO4N9yXF9xfdJnw4V7eDzHanzfunzJd9XWYGpZOcD0idMvK/xAhPtelD6iGnXwA1MVTMnSB8y5XazAxM99LD0KdNtUQRfokznMumDptqeKMBEeyulT5po+yIBE837uvRZk2x/NGBq6sK7APH7Rjxgoo5u6eOm14GYwNS24RHpA6cW7zeV1/fofukTJ9Y3IwMTtT8mfeakig9MPfipWsQEgIkmPy597HQSAaYyvAsQKxlgot6D0idPJClgoj68CxAjOWC8CxAlQWCi/kPSx/efKDBV1eBdAOZkgYkOz5K+AedJA1Om84j0HbhOHBjvAvCmABjvAnCmApiauvBTNaZ0ABNt+pb0TThNCzCVlz4hfRcuUwNMdPSY9GV4TBEwUfsC6evwlypgjK0Nny5gogGMrQ2bNmAqq14vfSeuUgdM1PCk9KV4SiEwZTqfkr4WP2kEJjqOdwFCpROY6MQe6ZtxklZgqsO7AEFSC0zUslL6cjykGBhja0OkGZho8KT0/ZhPNzBR+9PSN2Q87cC0G+8CFJR6YKI5z0hfkuUMAONdgEKyAExUi7G1+WYDmKjvWembMpoVYLwLkGdmgDG2Nr8MAVNZdb30ddnLEjDG1uaRLWCMrc05Y8BYYZtr5oCJTn1b+tIsZRCY6mqGpK/NThaBiTqwwjbbbAJjbG3WGQUmaj0tfXU2MguMFbbZZRiYerDC9uZZBiaqmCh9f+qzDYwVtjfNODBR8RnpK9SdeWCMrR0/B8AYWzteHoCJhjG29kb5AKaqmnrpm1SaE2CiKWelr1JnboDxLsDY+QHG2Nox8wSMsbVj5AsYY2uvyxkwxtZemztgKi/FuwCj8gdMdPQ56VtVlEdgrLAdlU9grLD9X06BiQawwvZyboExtvZKfoGJejG21jcwUR/G1voGxtha78BE/YmPrXUPnPrYWv/AROdSXmGbAjBlEh5bmwQw0WCl9EUDmLlUx9YmA5zquwDpACc6tjYl4CTH1iYFTFS7VPrCAcxcaitskwNObWxtesBEq1NaYZsicFJja5MEJmpolL54APOWzArbVIGTGVubLjDR2nXStw9g3lJ4FyBpYKIW92NrEwf2v8I2dWCi1gPSBgBmzvXYWgCPtNXx2FoAX67ivDQEgHlzO7YWwO9V7HOFLYD/n8sVtgAelcextQC+Kn8rbAF8de7eBQDwtTlbYQvg6/I1thbAY+RpbC2Ax+yCmxW2AB67pq5maRoA89bRLW0DYN58rLAF8Di1OhhbC+Bxsz+2FsDjZ35sLYBv1mTbY2sBfNPKTL8LAOAs6j0ozQRg5uyusAVwdpl9FwDA2dZvc4UtgLPO5k/VAJxDhw2OrQVwLmU6j0iDAZg3c+8CADjXjK2wBXDO2RpbC+A8srTCFsD5ZGhsLYDz6+Lz0nIAZs7I2FoA552NsbUALqABA2NrAVxIBlbYAriwGrSvsAVwgWkfWwvggju+UxoRwMydULzCFsAhUvwuAIDD1LJSWhLAvGkdWwvgYA2elMYEMHMaV9gCOGS79b0LAOCwqVthC+DAaXsXAMDBq1U1thbADGkaWwtgjhS9CwBgntSMrQUwU1rG1gKYLR1jawHMl4qxtQDmTMEKWwDzdkp6bC2AmaurGQKw7zpEV9gCmD/RsbUAjlHraQA7T2yFLYAj1SO0whbA0aqYCGDfiaywBXDMis8A2HnRx9YCOHKxx9YCOHrDUcfWAjh+VTX1APbdlLMA9l28dwEALFSssbUAFivO2FoAyxVlbC2AJYswthbAopWXcr8LAGDhLjJ/PQ1g8fpYJ6kBWL69BwDsvM7ZAPbdpu8A2Hc9dwDYd5nvAth5pSxvAgBYTy80A9h332P4dxjAmvo+gJ33IoB917YUwL47HvotAAArayDwf0oDWFsvAdh3Ux8DsO9+AGDfZX4IYN/1Adh3bSEfDgNYYT8CsO9+HHCcOIA11g1g370MYN/9BMC+Kwn35B/AKnsFwL7bAmDf7QOw78K9Bg9gle0HsO9mAdh34Xa1AFhlAHbeTwHsu58B2Hf43yTn/RzAvnscwL7Dwwbf3RbMF8AqexXAvpsJYN8FHEILYIUtwWuzvnstnC+AFdb2CwC77vWAvgDWV+aXAHbdr0L6AlhdWxcA2HW/DuoLYG0NB96lBGBdrQr7BzSAldUWfMkOgFUVeAoagJX1RnBfAGvqTQwEd91bHMtIAaymaizl8Fwm/LB3ACtq4UYeXwDraE7IR8AAVheWU7pu8BgbL4AV1LeM0RfA0l08yMkLYOHKS5/g9QWwaJsCvuEOYHU1dXF8NwlgLc0LveQMwJraWxmDF8BCZTqPxPEFsEiHw02yA7C+qmomRPMFcPz6D8XjBXD0SnayPNcHsJL67o/KC+C49TJ/8Qxg0cpK50f3BXC8JocbXwdgffUsDzhZBcDqag+7uB3Aump9TogXwDFq2/CImC+A+esIuCwWwOpq6mqW9AUwcxfC7U8BsL5iPdUHsEiZTtY3ngEs3EMPS+MCmLGy6nppWwAztutBaVkAMxb7qT6A49b3rDQrgBkrvk8aFcCMlUs81QdwtCrOS4sCmLGtyyP8nAzAYrVvluYEMGODB6QxAcxY24ZF0pYAZqxljbQkgBmri/lzMgBHb+06aUYAMza9UhoRwIxlOp+SNgQwYw2N0oIAZkzLU30A87T6bmk+ADO2UOjnZACOU3voHWUA1lTtUmk5ADPGPyQWwJLNeUaaDcCMRRkSC2Cx2p+WNgMwY4OV0mIAZiyj9Kk+gMN0Lt6QWADHT/FTfQAHqH+PtBWAGTuu5+dkAGYo+pBYAMes90lpJgAzVla9XloJwIwNiAyJBXCkpIbEAjhOYkNiARyjo3JDYgHMX3mp4JBYALMXYfUrgOWy9VQfwLkWZ/UrgIVSMCQWwHypGBILYLamnJU2ATBjVTX10iQAZmw46upXAEdO0ZBYADNk96k+gLOo+Iy0BYAZ0zYkFsBhq5goDQFgxnr0DYkFcMA0DokFcLBaT0sbAJgx0dWvAGavQ+uQWACHqK5mSPr+AczYKenVrwDmTPeQWAAXmK+n+gC+Nh2rXwHMlIEhsQAuIDWrXwHMkY0hsQDON02rXwEcvFpVq18BHDhDQ2IBnEeWhsQCOOd2e/k5GYDHzNiQWADn1uBJ6YsGMGNaV78COEwtK6VvGcCM2RwSC+BsO2FzSCyAs8vskFgAZ5P21a8ALqwGw0Nig+UX2PaQ2GC5BR4wsPo1Rk6BE3uqP04+gY2sfo2RR+Cjx6RvVVH+gFN8qj9O7oCdDIkNljNgN0Nig+UL2M+Q2GB5AvY0JDZYfoAznUekL1NjboAPG1z9GiMnwIk/1R8nH8D97obEBssDsMchscFyAOxySGywzAP3HpS+Qt0ZBy7zOiQ2WLaBJ9te/Rojy8DmV7/GyDCw/dWvMTIL3Opg9WuMjAK7HxIbLJvAHd3S92Ymi8BNXc3S12Yng8AXUhgSGyxzwHiqn1vGgJMZEhssW8DpDIkNliXglIbEBssQcFJDYoNlBhhP9fPLCnBqQ2KDZQO4OLkhscGyAOx29WuMDABXnJe+JMupB97qePVrjLQDu179GiPdwK0HpO/HfJqBUx4SGyzFwC3uV7/GSC0wfk4WJq3Aa9dJ34yTdAInsvo1RhqBMSQ2YAqBGxqlL8VT6oDxVD9s2oBXY0hs2HQBY0hs8FQBY0hs+BQB1y6VvgyPqQHGkFietAAnufo1RjqAMSSWLRXAqa5+jZEC4MFK6UvwnDhwBk/1WZMGPochsbzJAuOpPnuiwP2Jr36NkSAwVr/GSA64D0/1YyQF3IvVr3GSAcbq12iJAA9gSGy0BIAxJDZm8YExJDZqOyLzPrpf+sSJdToqb3kphsRGbmNMX6x+jd/z8XgXv4Sn+vHrjuaL1a8ibY7EiyGxQjW3xeDFkFi5VkXwnXJW+pQJ9xt23qpbhqQPmXIvcPsOY/WraMt5eTEkVrqVnLyZN/FUX7ptJXy+xWekT4eKin7LxYshsTqqZPLdvkX6ZOhy8xdz8PZgSKyaOhl8MSRWUeGfN7Selj4TGt3vwvJi9au2ZgX17cCQWHX9PhxvXQ2+eNbXK8G+7DiF1a8q+0MY3r1vSx8E3aA/BuDFU33FDb1asC9Wv6ruyJ8K4532Dn6rr7t7hgvxxepX/dW/njcvhsSaaMXL5fn5/hmrX43UvSkPXjzVN9S2v7TmyDv1ndnSHxrl0tx7Z+TAe/wN/Olsrgca/5rdN5dVf9uBf3ttNrTvtV1Tx8Ut+/s/3saMSdOtOHTsxX/etetfxdNLRnr3kuq7JSVH/7391Fv/mdQ9V/rjoaKi/wIgG7jFSqLpBQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wMS0xMlQxNzoyNDowNCswMTowMP7+zpQAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDEtMTJUMTc6MjQ6MDQrMDE6MDCPo3YoAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","export const BLOCK = {\r\n  X:'X', D:'D', I:'I', O:'O', T:'T', J:'J', L:'L', S:'S', Z:'Z'\r\n};\r\nexport const NORMAL_TYPES = [\r\n    BLOCK.I, BLOCK.O, BLOCK.T, BLOCK.J, BLOCK.L, BLOCK.S, BLOCK.Z,\r\n];\r\n\r\nexport const Tetromino = {\r\n  [BLOCK.I]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.I,BLOCK.I,BLOCK.I,BLOCK.I]\r\n        ],\r\n        w: 4,\r\n        h: 1,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n        ],\r\n        w: 1,\r\n        h: 4,\r\n        dx: 2,\r\n        dy: -1\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.I,BLOCK.I,BLOCK.I,BLOCK.I]\r\n        ],\r\n        w: 4,\r\n        h: 1,\r\n        dx: -2,\r\n        dy: 2\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n        ],\r\n        w: 1,\r\n        h: 4,\r\n        dx: 1,\r\n        dy: -2\r\n      },\r\n    }\r\n  },\r\n  [BLOCK.O]: {\r\n    maxRotate: 0,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.O,BLOCK.O],\r\n          [BLOCK.O,BLOCK.O],\r\n        ],\r\n        w: 2,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.T]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.T,BLOCK.X],\r\n          [BLOCK.T,BLOCK.T,BLOCK.T]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.T,BLOCK.X],\r\n          [BLOCK.T,BLOCK.T],\r\n          [BLOCK.T,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.T,BLOCK.T,BLOCK.T],\r\n          [BLOCK.X,BLOCK.T,BLOCK.X],\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.T],\r\n          [BLOCK.T,BLOCK.T],\r\n          [BLOCK.X,BLOCK.T]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.J]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.J,BLOCK.X,BLOCK.X],\r\n          [BLOCK.J,BLOCK.J,BLOCK.J]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.J,BLOCK.J],\r\n          [BLOCK.J,BLOCK.X],\r\n          [BLOCK.J,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.J,BLOCK.J,BLOCK.J],\r\n          [BLOCK.X,BLOCK.X,BLOCK.J]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.J],\r\n          [BLOCK.X,BLOCK.J],\r\n          [BLOCK.J,BLOCK.J]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.L]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.X,BLOCK.L],\r\n          [BLOCK.L,BLOCK.L,BLOCK.L]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.L,BLOCK.X],\r\n          [BLOCK.L,BLOCK.X],\r\n          [BLOCK.L,BLOCK.L]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.L,BLOCK.L,BLOCK.L],\r\n          [BLOCK.L,BLOCK.X,BLOCK.X]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.L,BLOCK.L],\r\n          [BLOCK.X,BLOCK.L],\r\n          [BLOCK.X,BLOCK.L]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.S]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.S,BLOCK.S],\r\n          [BLOCK.S,BLOCK.S,BLOCK.X]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.S,BLOCK.X],\r\n          [BLOCK.S,BLOCK.S],\r\n          [BLOCK.X,BLOCK.S]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.S,BLOCK.S],\r\n          [BLOCK.S,BLOCK.S,BLOCK.X]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.S,BLOCK.X],\r\n          [BLOCK.S,BLOCK.S],\r\n          [BLOCK.X,BLOCK.S]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.Z]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.Z,BLOCK.Z,BLOCK.X],\r\n          [BLOCK.X,BLOCK.Z,BLOCK.Z]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.Z,BLOCK.Z,BLOCK.X],\r\n          [BLOCK.X,BLOCK.Z,BLOCK.Z]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      },\r\n    }\r\n  }\r\n};","import BASE from './BASE';\r\n\r\nexport default {\r\n  BASE,\r\n}","import {BLOCK} from '../model/Tetromino';\r\n\r\nexport default {\r\n  MainFrame: {\r\n    background: '#7F8C8D',\r\n  },\r\n  block: {\r\n    Block: {\r\n\r\n    },\r\n    Cell: {\r\n      mapTypeToColor: {\r\n        [BLOCK.X]: 'transparent',\r\n        [BLOCK.D]: '#B5C2C3',\r\n        [BLOCK.I]: '#C0392B',\r\n        [BLOCK.O]: '#F39C12',\r\n        [BLOCK.T]: '#F1C40F',\r\n        [BLOCK.J]: '#27AE60',\r\n        [BLOCK.L]: '#2980B9',\r\n        [BLOCK.S]: '#34495E',\r\n        [BLOCK.Z]: '#8E44AD',\r\n      },\r\n    },\r\n  },\r\n  blackboard: {\r\n    BlackBoard: {\r\n      background: '#ECF0F1',\r\n    },\r\n  },\r\n  controller: {\r\n    buttons: {\r\n      Move: {\r\n        normal: '#3498DB',\r\n        shadowNormal: '#2980B9',\r\n        active: '#2980B9',\r\n        shadowActive: '#264B81',\r\n      },\r\n      SpaceBtn: {\r\n        normal: '#E74C3C',\r\n        shadowNormal: '#C0392B',\r\n        active: '#C0392B',\r\n        shadowActive: '#7A2A1E',\r\n      },\r\n    },\r\n    Controller: {\r\n      background: '#BDC3C7',\r\n    },\r\n  },\r\n  infoboard: {\r\n    components: {\r\n      Title: {\r\n        fontSize: 10,\r\n        color: '#34495E',\r\n      },\r\n      Value: {\r\n        fontSize: 15,\r\n        color: '#505050'\r\n      },\r\n    },\r\n    Counter: {\r\n      fontSize: 15,\r\n      color: '#505050',\r\n    },\r\n    InfoBoard: {\r\n      background: '#ECF0F1',\r\n    },\r\n    NextBlocks: {\r\n      borderColor: '#7F8C8D',\r\n    },\r\n  },\r\n  Message: {\r\n    StartMessage: {\r\n      color: '#34495E',\r\n    },\r\n    PauseMessage: {\r\n      color: '#34495E',\r\n      background: '#BDC3C7',\r\n    },\r\n  },\r\n  GameOverBoard: {\r\n    Title: {\r\n      color: '#34495E',\r\n    },\r\n    Score: {\r\n      color: '#34495E',\r\n    }\r\n  },\r\n  Combo: {\r\n    fontSize: 25,\r\n    color: '#34495E',\r\n  }\r\n};","import React from 'react';\r\n\r\nimport styled from 'styled-components';\r\nimport theme from '../../theme/index';\r\n\r\nimport SwitchPNG from '../../resource/switch.png';\r\nimport PausePNG from '../../resource/pause.png';\r\nimport PlayPNG from '../../resource/play.png';\r\n\r\nconst Base = styled.button`\r\n  -webkit-tap-highlight-color: rgba(255,255,255,0);\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  display: inline-block;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  outline: none;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  box-shadow: 0 5px #999;\r\n  \r\n  &.active {\r\n    box-shadow: 0 3px #666;\r\n    transform: translateY(2px);\r\n  }\r\n`;\r\n\r\nconst Move = styled(Base)`\r\n  color: #fff;\r\n  background-color: ${({theme}) => theme.normal};\r\n  box-shadow: 0 5px ${({theme}) => theme.shadowNormal};\r\n  width: 45px;\r\n  height: 45px;\r\n  padding-top: 3px;\r\n  \r\n  &.active {\r\n    background-color: ${({theme}) => theme.active};\r\n    box-shadow: 0 3px ${({theme}) => theme.shadowActive};\r\n  }\r\n`;\r\n\r\nMove.defaultProps = {\r\n  theme: theme.BASE.controller.buttons.Move\r\n};\r\n\r\nconst SpaceBtn = styled(Base)`\r\n  padding: 60px 60px;\r\n  border-radius: 100%;\r\n  background-color: ${({theme}) => theme.normal};\r\n  box-shadow: 0 5px ${({theme}) => theme.shadowNormal};\r\n  top: 19px;\r\n  left: 15px;\r\n  left: ${({inversed}) => inversed ? 185 : 15}px;\r\n  \r\n  &.active {\r\n    background-color: ${({theme}) => theme.active};\r\n    box-shadow: 0 3px ${({theme}) => theme.shadowActive};\r\n  }\r\n`;\r\n\r\nSpaceBtn.defaultProps = {\r\n  theme: theme.BASE.controller.buttons.SpaceBtn\r\n};\r\n\r\nconst UpBtn = styled(Move)`\r\n  top: 8px;\r\n  left: ${({inversed}) => 215 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst DownBtn = styled(Move)`\r\n  top: 105px;\r\n  left: ${({inversed}) => 215 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst LeftBtn = styled(Move)`\r\n  top: 58px;\r\n  left: ${({inversed}) => 169 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst RightBtn = styled(Move)`\r\n  top: 58px;\r\n  left: ${({inversed}) => 260 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst SwitchBtn = styled(Move)`\r\n  border-radius: 90%;\r\n  background: url(${SwitchPNG}) no-repeat;\r\n  padding: 5px;\r\n  background-size: cover;\r\n  top: 8px;\r\n  left: 151.5px;\r\n  width: 25px;\r\n  height: 25px;\r\n  background-origin: content-box;\r\n  background-color: #F1C40F;\r\n  box-shadow: 0 3px #F39C12;\r\n  \r\n  &.active {\r\n    background-color: #F39C12;\r\n    box-shadow: 0 3px #E67E22;\r\n  }\r\n`;\r\n\r\nconst PauseResumeToggleBtn = styled(Move)`\r\n  border-radius: 90%;\r\n  background: url(${({paused}) => paused ? PlayPNG : PausePNG}) no-repeat;\r\n  padding: 5px;\r\n  background-size: cover;\r\n  top: 8px;\r\n  left: 151.5px;\r\n  width: 25px;\r\n  height: 25px;\r\n  background-origin: content-box;\r\n  background-color: #F1C40F;\r\n  box-shadow: 0 3px #F39C12;\r\n  \r\n  &.active {\r\n    background-color: #F39C12;\r\n    box-shadow: 0 3px #E67E22;\r\n  }\r\n`;\r\n\r\nlet touch = false;\r\nexport const Up = ({ type,\r\n                     pressed,\r\n                     onMouseTouchEvent,\r\n                     inversed\r\n                   }) => (\r\n    <UpBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Down = ({ type,\r\n                       pressed,\r\n                       onMouseTouchEvent,\r\n                       inversed\r\n                     }) => (\r\n    <DownBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Left = ({ type,\r\n                       pressed,\r\n                       onMouseTouchEvent,\r\n                       inversed\r\n                     }) => (\r\n    <LeftBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Right = ({ type,\r\n                        pressed,\r\n                        onMouseTouchEvent,\r\n                        inversed\r\n                      }) => (\r\n    <RightBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Space = ({ type,\r\n                        pressed,\r\n                        onMouseTouchEvent,\r\n                        inversed\r\n                      }) => (\r\n    <SpaceBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Switch = ({ type,\r\n                        pressed,\r\n                        onMouseTouchEvent,\r\n                       }) => (\r\n    <SwitchBtn\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const PauseResumeToggle = ({ type,\r\n                                    pressed,\r\n                                    onMouseTouchEvent,\r\n                                    paused,\r\n                                  }) => (\r\n    <PauseResumeToggleBtn\r\n        paused={paused}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);","import { createActions } from 'redux-actions';\r\n\r\nexport const READY = 'READY';\r\nexport const GAME_IS_ON = 'GAME_IS_ON';\r\nexport const PAUSED = 'PAUSED';\r\nexport const RESUMED = 'RESUMED';\r\nexport const GAME_OVER = 'GAME_OVER';\r\nexport const LINE = 'LINE';\r\nexport const SCORE = 'SCORE';\r\nexport const SPEED = 'SPEED';\r\n\r\nexport const gameAction = createActions({\r\n  [READY]: undefined,\r\n  [GAME_IS_ON]: undefined,\r\n  [PAUSED]: (user = false) => ({user: !!user}),\r\n  [RESUMED]: (user = false) => ({user: !!user}),\r\n  [GAME_OVER]: highScoreUpdated => ({highScoreUpdated}),\r\n  [LINE] : payload => payload,\r\n  [SCORE] : payload => payload,\r\n  [SPEED] : speed => speed,\r\n});","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {Up, Left, Right, Down, Space, Switch, PauseResumeToggle} from './buttons';\r\n\r\nimport theme from '../../theme';\r\n\r\nimport styled from 'styled-components';\r\nimport {GAME_IS_ON, PAUSED, READY, RESUMED} from '../../action/game';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  background-color: ${props => props.theme.background};\r\n  width: 320px;\r\n  height: 160px;\r\n  padding: 5px;\r\n  bottom: 0px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.controller.Controller\r\n};\r\n\r\nlet Controller = ({button, pressed, changeButtonState, state, inversed}) => (\r\n    <StyledDiv>\r\n      <Up\r\n          inversed={inversed}\r\n          type={'UP'}\r\n          pressed={button === 'UP' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Down\r\n          inversed={inversed}\r\n          type={'DOWN'}\r\n          pressed={button === 'DOWN' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Left\r\n          inversed={inversed}\r\n          type={'LEFT'}\r\n          pressed={button === 'LEFT' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Right\r\n          inversed={inversed}\r\n          type={'RIGHT'}\r\n          pressed={button === 'RIGHT' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Space\r\n          inversed={inversed}\r\n          type={'SPACE'}\r\n          pressed={button === 'SPACE' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      {\r\n        state === READY &&\r\n        <Switch\r\n          type={'SWITCH'}\r\n          pressed={button === 'SWITCH' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n        />\r\n      }\r\n      {\r\n        (\r\n            state === GAME_IS_ON\r\n            || state === PAUSED\r\n            || state === RESUMED\r\n        ) &&\r\n        <PauseResumeToggle\r\n            type={'PAUSE_RESUME'}\r\n            paused={state === PAUSED}\r\n            pressed={button === 'PAUSE_RESUME' && pressed}\r\n            onMouseTouchEvent={changeButtonState}\r\n        />\r\n      }\r\n    </StyledDiv>\r\n);\r\n\r\nconst mapStateToProps = state => ({...state.controller, ...state.game});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  changeButtonState: (type, pressed) => {\r\n    const action = {type: `${type}_${pressed ? 'TRUE' : 'FALSE'}`};\r\n    return dispatch(action);\r\n  }\r\n});\r\n\r\nController = connect(mapStateToProps, mapDispatchToProps)(Controller);\r\n\r\nexport default Controller;","import React, {Component} from 'react';\r\nimport CountUp from 'react-countup';\r\n\r\nimport styled from 'styled-components';\r\n\r\nimport theme from '../../theme/index';\r\n\r\nconst StyledCountUp = styled(CountUp)`\r\n  display: block;\r\n  font-weight: 700;\r\n  font-family: \"Helvetica Neue\";\r\n  text-align: right;\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  color: ${({theme}) => theme.color}\r\n  bottom: 0px;\r\n  right: 0px;\r\n  line-height: 1;\r\n`;\r\n\r\nStyledCountUp.defaultProps = {\r\n  theme: theme.BASE.infoboard.Counter\r\n};\r\n\r\nexport default class Counter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      begin: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <StyledCountUp\r\n            start={this.state.begin}\r\n            end={this.props.value}\r\n            useEasing={false}\r\n            separator=\",\"\r\n            duration={0.5}\r\n        />\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.value !== this.props.value) {\r\n     this.setState({\r\n       begin: prevProps.value\r\n     })\r\n    }\r\n  }\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport Counter from './Counter';\r\nimport {connect} from 'react-redux';\r\nimport theme from '../../theme/index';\r\n\r\nexport const Label = styled.label`\r\n  display: block;\r\n  font-family: \"Helvetica Neue\";\r\n`;\r\n\r\nexport const Value = styled(Label)`\r\n  text-align: right;\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  color: ${({theme}) => theme.color}\r\n  font-weight: 700;\r\n  bottom: 0px;\r\n  right: 0px;\r\n  line-height: 1;\r\n`;\r\n\r\nValue.defaultProps = {\r\n  theme: theme.BASE.infoboard.components.Value\r\n};\r\n\r\nexport const Title = styled(Label)`\r\n  text-align: left;\r\n  font-weight: 900;\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  color: ${({theme}) => theme.color}\r\n`;\r\n\r\nTitle.defaultProps = {\r\n  theme: theme.BASE.infoboard.components.Title\r\n};\r\n\r\nexport const Div = styled.div`\r\n  background: transparent;\r\n  height: 32px;\r\n  margin-bottom: 0px;\r\n`;\r\n\r\nexport const Info = props => (\r\n    <Div>\r\n      <Title>{props.title}</Title>\r\n      <Value>{props.value}</Value>\r\n    </Div>\r\n);\r\n\r\nexport const HighScore = connect(\r\n    ({game}) => ({value: game.score.high})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>HIGH SCORE</Title>\r\n          <Counter value={value}/>\r\n        </Div>\r\n    )\r\n);\r\n\r\nexport const LastScore = connect(\r\n    ({game}) => ({value: game.score.last})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>LAST SCORE</Title>\r\n          <Counter value={value}/>\r\n        </Div>\r\n    )\r\n);\r\n\r\nexport const NowScore = connect(\r\n    ({game}) => ({value: game.score.now})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>NOW SCORE</Title>\r\n          <Counter value={value}/>\r\n        </Div>\r\n    )\r\n);\r\n\r\nexport const Speed = connect(\r\n    ({game}) => ({value: game.speed})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>SPEED</Title>\r\n          <Value>{value}</Value>\r\n        </Div>\r\n    )\r\n);","import styled from 'styled-components';\r\nimport theme from '../../theme/index';\r\n\r\nexport const Cell = styled.div`\r\n  box-sizing: border-box;\r\n  display: inline-block;\r\n  width: 15px;\r\n  height: 15px;\r\n  background-color: ${props => props.theme.mapTypeToColor[props.type]}};\r\n`;\r\n\r\nCell.defaultProps = {\r\n  theme: theme.BASE.block.Cell,\r\n};\r\n\r\n/*\r\nexport const BorderCell = styled.div`\r\n  display: inline-block;\r\n  width: 15px;\r\n  height: 15px;\r\n  border: 0.5px solid black;\r\n  box-sizing: border-box;\r\n  background-color: ${props => mapTypeToColor[props.type]};\r\n`;\r\n*/\r\n\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {Tetromino, BLOCK} from '../../model/Tetromino';\r\nimport {Cell} from './Cell';\r\n\r\n\r\nconst Wrapper = styled.div`\r\n  line-height: 1px;\r\n  text-align: center;\r\n`;\r\nconst Row = styled.div`\r\n  line-height: 1px;\r\n`;\r\n\r\n\r\nexport const NextBlock = ({type = BLOCK.X, rotate = 0, style}) => {\r\n  let shape;\r\n  if (type === BLOCK.X) {\r\n    shape = [[BLOCK.X]];\r\n  } else {\r\n    shape = Tetromino[type].rotate[rotate].shape;\r\n  }\r\n\r\n  return (\r\n      <Wrapper style={style}>\r\n        {\r\n          shape.map((row, y) => (\r\n              <Row key={y}>\r\n                {\r\n                  row.map((cellType, x) => (\r\n                      <Cell key={x} type={shape[y][x]}/>\r\n                  ))\r\n                }\r\n              </Row>\r\n          ) )\r\n        }\r\n      </Wrapper>\r\n  );\r\n};","import React from 'react';\r\nimport {Title} from './components';\r\nimport styled from 'styled-components';\r\n\r\nimport {NextBlock} from '../block/NextBlock';\r\nimport {connect} from 'react-redux';\r\n\r\nimport theme from '../../theme/index'\r\n\r\nconst Div = styled.div`\r\n  background: transparent;\r\n  height: 184px;\r\n`;\r\n\r\nconst Board = styled.div`\r\n  position: relative;\r\n  width: 75px;\r\n  height: 150px;\r\n  top: 7.5px;\r\n  left: 19px;\r\n  background-color: transparent;\r\n  border: 3px dotted ${({theme}) => theme.borderColor};\r\n`;\r\n\r\nBoard.defaultProps = {\r\n  theme: theme.BASE.infoboard.NextBlocks\r\n};\r\n\r\nconst Table = styled.table`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nconst NextBlocks = connect(\r\n    ({block}) => ({next: block.next})\r\n)(\r\n    ({next}) => {\r\n      const nextArr = next.slice(0, 3);\r\n      return (\r\n          <Div>\r\n            <Title>NEXT</Title>\r\n            <Board>\r\n              <Table>\r\n                <tbody>\r\n                {\r\n                  nextArr.map(({type}, i) => (\r\n                      <tr key={i}>\r\n                        <td>\r\n                          <NextBlock type={type}/>\r\n                        </td>\r\n                      </tr>\r\n                  ))\r\n                }\r\n                </tbody>\r\n              </Table>\r\n            </Board>\r\n          </Div>\r\n      )\r\n    }\r\n);\r\n\r\nexport default NextBlocks;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {HighScore, LastScore, NowScore, Speed} from './components';\r\nimport NextBlocks from './NextBlocks';\r\n\r\nimport theme from '../../theme/index';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  right: 10px;\r\n  background: ${({theme}) => theme.background};\r\n  padding: 10px 10px 10px 10px;\r\n  width: 140px;\r\n  height: 300px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.infoboard.InfoBoard\r\n};\r\n\r\n\r\nconst InfoBoard = connect(\r\n    ({game}) => game\r\n)(\r\n    game => {\r\n      return (\r\n          <StyledDiv>\r\n            <HighScore/>\r\n            {!game.playing && <LastScore/>}\r\n            {game.playing && <NowScore/>}\r\n            <Speed/>\r\n            <NextBlocks/>\r\n          </StyledDiv>\r\n      );\r\n    }\r\n);\r\n\r\nexport default InfoBoard;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {Tetromino} from '../../model/Tetromino';\r\nimport {Cell} from './Cell';\r\n\r\n\r\nconst Wrapper = styled.div`\r\n  position: absolute;\r\n  line-height: 1px;\r\n  text-align: center;\r\n  ${({x, y, w, h}) => `\r\n  top: ${y > 0? y * 15 : 0}px;\r\n  left: ${x * 15}px;\r\n  width: ${w * 15}px;\r\n  height: ${h * 15}px;\r\n  `}\r\n`;\r\n\r\nconst Row = styled.div`\r\n  line-height: 1px;\r\n`;\r\n\r\nexport const Block = ({type, rotate, x, y, style}) => {\r\n  const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n  let targetShape = shape;\r\n\r\n  if (y <= -h) { return (null);}\r\n  if (y < 0) {\r\n    targetShape = shape.slice(-y);\r\n  }\r\n\r\n  const blockProps = {type, x, y, w, h: targetShape.length};\r\n\r\n  return (\r\n      <Wrapper {...blockProps} style={style}>\r\n        {\r\n          targetShape.map((row, y) => (\r\n              <Row key={y}>\r\n                {\r\n                  row.map((cellType, x) => (\r\n                      <Cell key={x} type={targetShape[y][x]}/>\r\n                  ))\r\n                }\r\n              </Row>\r\n          ) )\r\n        }\r\n      </Wrapper>\r\n  );\r\n};","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Cell} from '../block/Cell';\r\nimport {Block} from '../block/Block';\r\n\r\nimport theme from '../../theme/index'\r\nimport {BLOCK} from '../../model/Tetromino';\r\n\r\nimport {GAME_OVER} from '../../action/game';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  left: 10px;\r\n  background-color: ${({theme}) => theme.background};\r\n  width: 150px;\r\n  height: 300px;\r\n  ${({hidden}) => `\r\n  display: ${hidden ? 'none' : 'block'}\r\n  `}\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.blackboard.BlackBoard\r\n};\r\n\r\nconst Row = styled.div`\r\n  width: 150px;\r\n  height: 15px;\r\n  line-height: 0px;\r\n`;\r\n\r\nexport const BlockBoard = connect(\r\n    ({block, game}) => ({\r\n      board: block.board,\r\n      now: block.now,\r\n      paused: game.paused,\r\n      gameState: game.state,\r\n    })\r\n)(\r\n    ({board: t, now: block, paused, gameState}) => {\r\n      return (\r\n          <StyledDiv hidden={paused}>\r\n            {\r\n              t.map((row, y) => (\r\n                  <Row key={y}>\r\n                    {row.map((type, x) => <Cell key={x} type={gameState === GAME_OVER && type !== BLOCK.X ? BLOCK.D : type}/>)}\r\n                  </Row>\r\n              ))\r\n            }\r\n            {\r\n              block.type && <Block {...block} />\r\n            }\r\n          </StyledDiv>\r\n      )\r\n    }\r\n);\r\n\r\nexport default BlockBoard;","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport {connect} from 'react-redux';\r\n\r\nimport theme from '../theme/index';\r\n\r\nconst blink = keyframes`\r\n  0%   { opacity: 0; }\r\n  25%  { opacity: 1; }\r\n  75%  { opacity: 1; }\r\n  100% { opacity: 0; }\r\n`;\r\n\r\nconst Label = styled.label`\r\n  position: absolute;\r\n  display: block;\r\n  text-align: center;\r\n  font-size: 1.9em;\r\n  font-family: Lato;\r\n  font-weight: 900;\r\n`;\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  left: 10px;\r\n  background-color: ${({theme}) => theme.background};\r\n  width: 150px;\r\n  height: 300px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.Message.PauseMessage\r\n};\r\n\r\nconst StartMsgLb = styled(Label)`\r\n  top: 55px;\r\n  left: 20px;\r\n  width: 130px;\r\n  color: ${({theme}) => theme.color};\r\n  animation: ${blink} 2.5s linear infinite;\r\n`;\r\n\r\nStartMsgLb.defaultProps = {\r\n  theme: theme.BASE.Message.StartMessage\r\n};\r\n\r\nconst PauseMsgLb = styled(Label)`\r\n  top: 120px;\r\n  left: 0px;\r\n  width: 150px;\r\n  color: ${({theme}) => theme.color};\r\n`;\r\n\r\nPauseMsgLb.defaultProps = {\r\n  theme: theme.BASE.Message.PauseMessage\r\n};\r\n\r\nexport const StartMessage = connect(\r\n    ({game}) => game\r\n)(\r\n    game => {\r\n      if (game.state === 'READY') {\r\n        return (\r\n            <StartMsgLb>\r\n              PRESS<br/>SPACE<br/>OR<br/>RED<br/>BUTTON\r\n            </StartMsgLb>\r\n        );\r\n      }\r\n\r\n      return (null);\r\n    }\r\n);\r\n\r\nexport const PauseMessage = connect(\r\n    ({game}) => game\r\n)(\r\n    game => {\r\n      if (game.state === 'PAUSED') {\r\n        return (\r\n            <StyledDiv>\r\n              <PauseMsgLb>\r\n                PAUSED\r\n              </PauseMsgLb>\r\n            </StyledDiv>\r\n        );\r\n      }\r\n\r\n      return (null);\r\n    }\r\n);","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport {connect} from 'react-redux';\r\nimport theme from '../theme/index';\r\nimport {GAME_OVER} from '../action/game';\r\n\r\nimport CountUp from 'react-countup';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  left: 10px;\r\n  background-color: transparent;\r\n  width: 150px;\r\n  height: 300px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.GameOverBoard\r\n};\r\n\r\nconst GameOverTitle = styled.label`\r\n  position: relative;\r\n  display: block;\r\n  text-align: center;\r\n  font-size: 1.9em;\r\n  font-family: Lato;\r\n  font-weight: 900;\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  color: ${({theme}) => theme.color};\r\n`;\r\n\r\nGameOverTitle.defaultProps = {\r\n  theme: theme.BASE.GameOverBoard.Title,\r\n};\r\n\r\nconst Score = styled(CountUp)`\r\n  display: block;\r\n  font-weight: 700;\r\n  font-family: \"Helvetica Neue\";\r\n  text-align: center;\r\n  font-size: 20px;\r\n  color: ${({theme}) => theme.color}\r\n  width: 100%;\r\n  margin-top: 20px;\r\n`;\r\n\r\nScore.defaultProps = {\r\n  theme: theme.BASE.GameOverBoard.Score,\r\n};\r\n\r\nconst blink = keyframes`\r\n  0%   { opacity: 0; }\r\n  25%  { opacity: 1; }\r\n  75%  { opacity: 0; }\r\n  100% { opacity: 1; }\r\n`;\r\n\r\nconst HighScore = styled.label`\r\n  display: block;\r\n  margin-top: 20px;\r\n  color: #E74C3C;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  font-family: Lato;\r\n  font-weight: 900;\r\n  text-align: center;\r\n  width: 100%;\r\n  animation: ${blink} 2s step-start 0s infinite;\r\n`;\r\n\r\nconst GameOverBoard = connect(\r\n    ({game}) => ({game})\r\n)(\r\n    ({\r\n       game: {state, highScoreUpdated, score: {now}},\r\n     }) => (\r\n        state === GAME_OVER && (\r\n            <StyledDiv>\r\n              <GameOverTitle>\r\n                GAME<br/>OVER\r\n              </GameOverTitle>\r\n              {highScoreUpdated && (\r\n                  <HighScore>\r\n                    NEW<br/>\r\n                    HIGH SCORE!!\r\n                  </HighScore>\r\n              )}\r\n              <Score\r\n                  start={0}\r\n                  end={now}\r\n                  useEasing={true}\r\n                  separator=\",\"\r\n                  duration={2}\r\n              />\r\n\r\n            </StyledDiv>\r\n        )\r\n    )\r\n);\r\n\r\nexport default GameOverBoard;","import React, {Component} from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport {connect} from 'react-redux';\r\nimport theme from '../theme/index';\r\nimport {GAME_IS_ON, RESUMED} from '../action/game';\r\n\r\nconst move = keyframes`\r\n  0%   { top: 160px; }\r\n  80% { \r\n    top: 130px;\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    top: 130px;\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\nconst StyledDiv = styled.label`\r\n  display: none;\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 160px;\r\n  left: 10px;\r\n  background-color: transparent;\r\n  width: 150px;\r\n  text-align: center;\r\n  color: ${({theme}) => theme.color};\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  font-family: Lato;\r\n  font-weight: 700;\r\n  \r\n  &.show {\r\n    display: block;\r\n    animation: ${move} 0.5s ease-out 1 forwards;\r\n  }\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.Combo\r\n};\r\n\r\nclass Combo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show: false\r\n    };\r\n    this.timer = null;\r\n  }\r\n  render() {\r\n    return (\r\n        <StyledDiv className={this.state.show? 'show' : ''}>\r\n          {this.props.combo}<br/>\r\n          COMBO\r\n        </StyledDiv>\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    const {state, combo} = this.props;\r\n    if (state === GAME_IS_ON || state === RESUMED) {\r\n      if (combo > 0 && prevProps.combo !== combo) {\r\n        if (this.timer !== null) {\r\n          clearTimeout(this.timer);\r\n        }\r\n        this.setState({\r\n          show: true\r\n        });\r\n        this.timer = setTimeout(() => this.setState({\r\n          show: false\r\n        }), 600);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nCombo = connect(\r\n    ({game}) => ({state: game.state, combo: game.line.last})\r\n)(Combo);\r\n\r\nexport default Combo;","import React, { Component } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport Controller from './controller/Controller';\r\nimport InfoBoard from './infoboard/InfoBoard';\r\nimport BlockBoard from './blockboard/BlockBoard';\r\nimport {StartMessage, PauseMessage} from './Message';\r\nimport GameOverBoard from './GameOverBoard';\r\nimport Combo from './Combo';\r\n\r\nimport theme from '../theme/index'\r\n\r\nconst Scalable = styled.div`\r\n  position: absolute;\r\n  background: ${({theme}) => theme.background};\r\n  top:50%;\r\n  left:50%;\r\n  ${({frameWidth, frameHeight, frameScale}) => `\r\n    width: ${frameWidth}px;\r\n    height: ${frameHeight}px;\r\n    margin: ${- frameHeight / 2}px 0 0 ${- frameWidth / 2}px;\r\n    transform: scale(${frameScale});\r\n  `}\r\n`;\r\n\r\nScalable.defaultProps = {\r\n  theme: theme.BASE.MainFrame,\r\n};\r\n\r\nconst BASE_SIZE = {\r\n  width: 320,\r\n  height: 480,\r\n  ratio: 480/320,\r\n};\r\n\r\nlet resizeTimer;\r\nconst resizeDelay = 100;\r\n\r\nexport default class MainFrame extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.onResizeDebounced = this.onResizeDebounced.bind(this);\r\n    this.state = {\r\n      scale: this.onResizeDebounced(false)\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.onResize);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.onResize);\r\n  };\r\n\r\n  onResize() {\r\n    //Debouncing window.onresize\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(this.onResizeDebounced, resizeDelay);\r\n  }\r\n\r\n  onResizeDebounced(changeState = true) {\r\n    const {width, height, ratio} = BASE_SIZE;\r\n    const {innerWidth, innerHeight} = window;\r\n\r\n    const windowRatio = innerHeight / innerWidth;\r\n    let newScale;\r\n    if (windowRatio <= ratio) {\r\n      newScale = innerHeight / height;\r\n    } else {\r\n      newScale = innerWidth / width;\r\n    }\r\n\r\n    if (changeState) {\r\n      this.setState({\r\n        scale: newScale\r\n      });\r\n    } else {\r\n      return newScale;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <Scalable\r\n          frameWidth={BASE_SIZE.width}\r\n          frameHeight={BASE_SIZE.height}\r\n          frameScale={this.state.scale}\r\n        >\r\n          <InfoBoard/>\r\n          <BlockBoard/>\r\n          <Controller/>\r\n          <StartMessage/>\r\n          <PauseMessage/>\r\n          <GameOverBoard/>\r\n          <Combo/>\r\n        </Scalable>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n","import { createGlobalStyle } from 'styled-components';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  \r\n`;\r\n\r\nexport default GlobalStyle;","import React from 'react';\r\nimport MainFrame from './component/MainFrame';\r\nimport GlobalStyle from './GlobalStyle';\r\n\r\nconst App = () => (\r\n    <React.Fragment>\r\n      <MainFrame/>\r\n      <GlobalStyle />\r\n    </React.Fragment>\r\n);\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { combineActions } from 'redux-actions';\r\n\r\nexport function makeCombineActionType (actionCreators) {\r\n  return combineActions.apply(null, [...Object.values(actionCreators)]);\r\n}","import { createActions } from 'redux-actions';\r\n\r\nconst actionNames = [\r\n  'UP_TRUE',\r\n  'UP_FALSE',\r\n  'DOWN_TRUE',\r\n  'DOWN_FALSE',\r\n  'LEFT_TRUE',\r\n  'LEFT_FALSE',\r\n  'RIGHT_TRUE',\r\n  'RIGHT_FALSE',\r\n  'SPACE_TRUE',\r\n  'SPACE_FALSE',\r\n  'INVERSE_POSITION_TRUE',\r\n  'INVERSE_POSITION_FALSE',\r\n  'PAUSE_RESUME_TRUE',\r\n  'PAUSE_RESUME_FALSE',\r\n];\r\n\r\nconst actionMap = {};\r\n\r\nfor (const actionName of actionNames) {\r\n  actionMap[actionName] = undefined;\r\n}\r\n\r\nexport const buttonAction = createActions(actionMap);\r\n\r\n\r\n\r\n\r\n\r\n","import {createActions} from 'redux-actions';\r\n\r\nexport const PAGE_STATE = {\r\n  ACTIVE: 'ACTIVE',\r\n  PASSIVE: 'PASSIVE',\r\n  HIDDEN: 'HIDDEN',\r\n};\r\n\r\nexport const ACTIVE = `PAGE_STATE/${PAGE_STATE.ACTIVE}`;\r\nexport const PASSIVE = `PAGE_STATE/${PAGE_STATE.PASSIVE}`;\r\nexport const HIDDEN = `PAGE_STATE/${PAGE_STATE.HIDDEN}`;\r\n\r\nconst actionCreator = createActions({\r\n  [ACTIVE]: () => PAGE_STATE.ACTIVE,\r\n  [PASSIVE]: () => PAGE_STATE.PASSIVE,\r\n  [HIDDEN]: () => PAGE_STATE.HIDDEN,\r\n});\r\n\r\nexport const pageStateAction = actionCreator.pageState;","import lifecycle from 'page-lifecycle/dist/lifecycle.es5';\r\nimport { handleAction } from 'redux-actions';\r\nimport {makeCombineActionType} from '../util/util';\r\nimport {\r\n  pageStateAction,\r\n} from '../action/pageState';\r\n\r\nconst { state } = lifecycle;\r\n\r\nexport const pageState = handleAction(\r\n    makeCombineActionType(pageStateAction),\r\n    (state, action) => ({\r\n      old: state.now,\r\n      now: action.payload,\r\n    }),\r\n    {\r\n      old: state,\r\n      now: state,\r\n    }\r\n);","import { handleAction } from 'redux-actions';\r\nimport {makeCombineActionType} from '../util/util';\r\nimport {\r\n  buttonAction\r\n} from '../action/controller';\r\n\r\nexport const controller = handleAction(\r\n    makeCombineActionType(buttonAction),\r\n    (state, {type}) => {\r\n      const idx = type.lastIndexOf('_');\r\n      const button = type.slice(0, idx);\r\n      const pressed = type.slice(idx + 1) === 'TRUE' ? true : false;\r\n\r\n      const newState = {\r\n        ...state, button, pressed\r\n      };\r\n\r\n      if (button === 'INVERSE_POSITION') {\r\n        newState.inversed= !state.inversed\r\n      }\r\n\r\n      return newState;\r\n    },\r\n    {\r\n      button: null,\r\n      pressed: null,\r\n      inversed: false\r\n    }\r\n);","import { createActions } from 'redux-actions';\r\nimport {NORMAL_TYPES} from '../model/Tetromino';\r\n\r\nexport const DOWN = 'BLOCK/DOWN';\r\nexport const LEFT = 'BLOCK/LEFT';\r\nexport const RIGHT = 'BLOCK/RIGHT';\r\nexport const ROTATE = 'BLOCK/ROTATE';\r\nexport const DROP = 'BLOCK/DROP';\r\nexport const PUSH_NEXT = 'BLOCK/PUSH_NEXT';\r\nexport const SHIFT_NEXT = 'BLOCK/SHIFT_NEXT';\r\nexport const COMMIT = 'BLOCK/COMMIT';\r\nexport const ROW_CLEAR = 'BLOCK/ROW_CLEAR';\r\nexport const CLEAR = 'BLOCK/CLEAR';\r\n\r\nconst actionCreator = createActions({\r\n  [DOWN]: undefined,\r\n  [LEFT]: undefined,\r\n  [RIGHT]: undefined,\r\n  [ROTATE]: undefined,\r\n  [DROP]: undefined,\r\n  [PUSH_NEXT] : () => {\r\n    const blocks = NORMAL_TYPES.slice(0);\r\n    const randomBlocks = [];\r\n    while (blocks.length > 0) {\r\n      randomBlocks.push({\r\n        type: // 피셔-예이츠 셔플\r\n            blocks.splice(\r\n                Math.floor(Math.random() * blocks.length),\r\n                1\r\n            )[0],\r\n        rotate: 0\r\n      });\r\n    }\r\n    return {blocks: randomBlocks};\r\n  },\r\n  [SHIFT_NEXT]: undefined,\r\n  [COMMIT]: undefined,\r\n  [ROW_CLEAR]: rows => ({rows: Array.isArray(rows) ? rows : [rows]}),\r\n  [CLEAR]: undefined,\r\n});\r\n\r\nexport const blockAction = actionCreator.block;\r\n","import { handleActions, combineActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport {\r\n  DOWN,\r\n  LEFT,\r\n  RIGHT,\r\n  ROTATE,\r\n  DROP,\r\n  PUSH_NEXT,\r\n  SHIFT_NEXT,\r\n  COMMIT,\r\n  ROW_CLEAR,\r\n  CLEAR,\r\n  blockAction,\r\n} from '../action/block';\r\nimport {Tetromino, BLOCK} from '../model/Tetromino';\r\nconst {down, left, right} = blockAction;\r\n\r\nconst getClearBoard = (defaultValue = BLOCK.X) => {\r\n  const t = [];\r\n  for (let y = 0; y < 20; y++) {\r\n    t.push(new Array(10).fill(defaultValue));\r\n  }\r\n\r\n  return t;\r\n};\r\n\r\n/*const types = 'XDIOTJLSZ';\r\nconst getRandomType = () => types[Math.floor(Math.random() * 7)];\r\nconst getRandomBoard = () => {\r\n  const t = [];\r\n  for (let y = 0; y < 20; y++) {\r\n    t.push([]);\r\n    for (let x = 0; x < 10; x++) {\r\n      t[y].push(getRandomType());\r\n    }\r\n  }\r\n  return t;\r\n};*/\r\n\r\nconst defaultState = {\r\n  board: getClearBoard(),\r\n  now: {\r\n    type: null,\r\n    rotate: null,\r\n    x: null,\r\n    y: null,\r\n  },\r\n  committed: {\r\n    type: null,\r\n    rotate: null,\r\n    x: null,\r\n    y: null,\r\n  },\r\n  cachedCollisionCheck: {\r\n    [LEFT]: false,\r\n    [DOWN]: false,\r\n    [RIGHT]: false,\r\n    [ROTATE]: false\r\n  },\r\n  next: [\r\n    /*{\r\n      type: null,\r\n      rotate: null,\r\n    }*/\r\n  ],\r\n};\r\n\r\nexport const collisionCheck = (state, actionType) => {\r\n  const {now : {type, rotate, x, y}, board} = state;\r\n  const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n  const boardWidth = board[0].length,\r\n      boardHeight = board.length;\r\n\r\n  let dx = 0, dy = 0, cx, cy;\r\n  switch (actionType) {\r\n    case LEFT:\r\n      dx = -1;\r\n      cx = x + dx;\r\n      if (cx < 0) {\r\n        // 보드 외곽(왼쪽) 과의 충돌 확인됨\r\n        return false;\r\n      }\r\n      break;\r\n    case RIGHT:\r\n      dx = 1;\r\n      cx = x + w - 1 + dx;\r\n      if (cx >= boardWidth) {\r\n        // 보드 외곽(오른쪽) 과의 충돌 확인됨\r\n        return false;\r\n      }\r\n      break;\r\n    case DOWN:\r\n      dy = 1;\r\n      cy = y + h - 1 + dy;\r\n      if (cy >= boardHeight) {\r\n        // 보드 외곽(바닥)과의 충돌 확인됨\r\n        return false;\r\n      }\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n\r\n  for (let iy = 0; iy < h; iy++) {\r\n    for (let jx = 0; jx < w; jx++) {\r\n\r\n      // 내 블록 영역상 빈 블록이면 통과\r\n      if (shape[iy][jx] === BLOCK.X) {\r\n        continue;\r\n      }\r\n\r\n      // 충돌 검사하려는 셀이 아직 내 블록 안쪽이라면 통과\r\n      if (\r\n          (iy + dy) < h\r\n          && (jx + dx) >= 0\r\n          && (jx + dx) < w\r\n          && shape[iy + dy][jx + dx] === type\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      // 충돌 검사하려는 셀이 화면 상단이면 통과\r\n      if (y + iy + dy < 0) {\r\n        continue;\r\n      }\r\n\r\n      // 충돌 검사하려는 셀이 비어있다면 통과\r\n      if (board[y + iy + dy][x + jx + dx] === BLOCK.X) {\r\n        continue;\r\n      }\r\n\r\n      // 다른 block과의 충돌 확인됨\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // 이동할 방향의 모든 셀에서 충돌 확인 안됨. 이동 가능\r\n  return true;\r\n};\r\n\r\nexport const rotateCollisionCheck = state => {\r\n  const {now : {type, rotate, x, y}, board} = state;\r\n  const {maxRotate} = Tetromino[type];\r\n  const nextRotate = (rotate + 1) % (maxRotate + 1);\r\n  const {shape, w, h, dx, dy} = Tetromino[type].rotate[nextRotate];\r\n\r\n  // rotate 후 새 블록 위치가 보드 경계를 넘어서면 안쪽으로 밀어 넣는다.\r\n  const\r\n      boardWidth = board[0].length,\r\n      boardHeight = board.length;\r\n\r\n  let newDx, newDy;\r\n\r\n  if (x + dx < 0) {\r\n    newDx = -x;\r\n  } else if ((x + dx + w - 1) >= boardWidth) {\r\n    newDx = boardWidth - w - x;\r\n  } else {\r\n    newDx = dx;\r\n  }\r\n\r\n  if ((y + dy + h) >= boardHeight) {\r\n    newDy = boardHeight - h - y;\r\n  } else {\r\n    newDy = dy;\r\n  }\r\n\r\n  // cx, cy = 1차 보정 된 rotate 후 새 블록 위치\r\n  let cx = x + newDx,\r\n      cy = y + newDy;\r\n\r\n  let ty = 0, collapsed;\r\n\r\n  //board의 rotate 전 내 블록 셀을 isBefore에 모두 기록\r\n  const {\r\n    shape: _shape,\r\n    w: _w,\r\n    h: _h,\r\n  } = Tetromino[type].rotate[rotate];\r\n\r\n  const isBefore = {};\r\n  for (let iy = 0; iy < _h; iy++) {\r\n    for (let jx = 0; jx < _w; jx++) {\r\n      if (_shape[iy][jx] === type) {\r\n        isBefore[`${iy + y},${jx + x}`] = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  while (ty >= -2) {\r\n    collapsed = false;\r\n\r\n    for (let iy = 0; iy < h; iy++) {\r\n      if (collapsed) break;\r\n      for (let jx = 0; jx < w; jx++) {\r\n        // 내 블록 영역상 빈 블록이면 통과\r\n        if (shape[iy][jx] === BLOCK.X) {\r\n          continue;\r\n        }\r\n\r\n        // 충돌 검사하려는 셀이 화면 상단이면 통과\r\n        if (iy + cy + ty < 0) {\r\n          continue;\r\n        }\r\n\r\n        // rotate 시킬 셀이 비었으면 통과\r\n        if (board[iy + cy + ty][jx + cx] === BLOCK.X) {\r\n          continue;\r\n        } else {\r\n          collapsed = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (collapsed) {\r\n      if (ty > -2) {\r\n        ty--;\r\n        continue;\r\n      } else {\r\n        return {result: false};\r\n      }\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  // 회전할 방향의 모든 셀에서 충돌 확인 안됨. 이동 가능\r\n  return {\r\n    result: true,\r\n    dx: newDx,\r\n    dy: newDy + ty,\r\n    rotate: nextRotate\r\n  }\r\n};\r\n\r\nexport const getDropPositionY = state => {\r\n  const {now : {type, rotate, x, y}, board} = state;\r\n  const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n  let maxK = board.length - (y + h);\r\n  for (let jx = 0; jx < w; jx++) {\r\n    for (let iy = h - 1; iy >= 0; iy--) {\r\n      // 내 블록 영역상 빈 블록이면 통과\r\n      if (shape[iy][jx] === BLOCK.X) {\r\n        continue;\r\n      }\r\n\r\n      // 대상 셀부터 수직으로 내려가며 충돌 확인\r\n      // 최소값까지만 확인함.\r\n      for (let k = 1; k <= maxK; k++) {\r\n\r\n        // 충돌 검사하려는 셀이 아직 내 블록 안쪽이라면 통과\r\n        if (\r\n            iy + k < h\r\n            && shape[iy + k][jx] === type\r\n        ) {\r\n          continue;\r\n        }\r\n\r\n        // 충돌 검사하려는 셀이 화면 상단이면 통과\r\n        if (y + iy + k < 0) {\r\n          continue;\r\n        }\r\n\r\n        // 충돌 검사하려는 셀이 비어있다면 통과\r\n        if (board[y + iy + k][x + jx] === BLOCK.X) {\r\n          continue;\r\n        }\r\n\r\n        if (k - 1 === 0) {\r\n          return 0; // 0이면 (못 내려감) 더 확인할 필요 없으므로 종료.\r\n        }\r\n\r\n        if (k - 1 < maxK) {\r\n          maxK = k - 1; // 최솟값 갱신\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return maxK;\r\n};\r\n\r\nexport const block = handleActions(\r\n    {\r\n\r\n      [combineActions(down, left, right)]:\r\n          (state, {type: actionType}) => {\r\n            if (state.cachedCollisionCheck[actionType]) {\r\n              return state;\r\n            }\r\n            if (collisionCheck(state, actionType) === false) {\r\n              return update(state, {\r\n                cachedCollisionCheck: {\r\n                  [actionType] : {$set: true}\r\n                }\r\n              });\r\n            } else {\r\n              const {x, y, type} = state.now;\r\n              const nextNow = {...state.now};\r\n\r\n              switch (actionType) {\r\n                case DOWN:\r\n                  nextNow.y = y + 1;\r\n                  break;\r\n                case LEFT:\r\n                  nextNow.x = x - 1;\r\n                  break;\r\n                case RIGHT:\r\n                  nextNow.x = x + 1;\r\n                  break;\r\n                default:\r\n                  return state;\r\n              }\r\n\r\n              return update(state, {\r\n                now: {$set: nextNow},\r\n                cachedCollisionCheck: {$set : {\r\n                    [LEFT]: false,\r\n                    [DOWN]: false,\r\n                    [RIGHT]: false,\r\n                    [ROTATE]: Tetromino[type].maxRotate === 0\r\n                  }}\r\n              });\r\n            }\r\n          },\r\n\r\n      [ROTATE]: state => {\r\n        if (state.cachedCollisionCheck[ROTATE]) {\r\n          return state;\r\n        }\r\n\r\n        const {result, dx, dy, rotate} = rotateCollisionCheck(state);\r\n        if (result === false) {\r\n          return update(state, {\r\n            cachedCollisionCheck: {\r\n              [ROTATE] : {$set: true}\r\n            }\r\n          });\r\n        }\r\n\r\n        const {x, y, type} = state.now;\r\n        const nextNow = {\r\n          type, rotate,\r\n          x: x + dx,\r\n          y: y + dy,\r\n        };\r\n\r\n        return update(state, {\r\n          now: {$set: nextNow},\r\n          cachedCollisionCheck: {$set : {\r\n              [LEFT]: false,\r\n              [DOWN]: false,\r\n              [RIGHT]: false,\r\n              [ROTATE]: Tetromino[type].maxRotate === 0\r\n            }}\r\n        });\r\n\r\n\r\n      },\r\n\r\n      [DROP]: state => update(state, {\r\n        now: {\r\n          y: {$set: state.now.y + getDropPositionY(state)},\r\n        },\r\n        cachedCollisionCheck: {$set : {\r\n            [LEFT]: false,\r\n            [DOWN]: false,\r\n            [RIGHT]: false,\r\n            [ROTATE]: false\r\n          }}\r\n      }),\r\n\r\n      [PUSH_NEXT]: (state, {payload: {blocks}}) => update(state, {\r\n        next: {$push: blocks}\r\n      }),\r\n\r\n      [SHIFT_NEXT]: state => {\r\n        const {next: [newBlock]} = state;\r\n\r\n        const newNow = {\r\n          type: newBlock.type,\r\n          rotate: newBlock.rotate,\r\n          x: 4,\r\n          y: -Tetromino[newBlock.type].rotate[newBlock.rotate].h,\r\n        };\r\n\r\n        return update(state, {\r\n          now: {$set: newNow},\r\n          next: {$splice: [[0, 1]]},\r\n          cachedCollisionCheck: {$set : {\r\n              [LEFT]: false,\r\n              [DOWN]: false,\r\n              [RIGHT]: false,\r\n              [ROTATE]: Tetromino[newBlock.type].maxRotate === 0\r\n            }},\r\n          committed: {$set: {\r\n              type: null,\r\n              rotate: null,\r\n              x: null,\r\n              y: null,\r\n            }}\r\n        });\r\n      },\r\n\r\n      [COMMIT]: state => {\r\n        const {type, rotate, x, y} = state.now;\r\n        const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n        let cx, cy, updateObj = null;\r\n        for (let iy = 0; iy < h; iy++) {\r\n          cy = iy + y;\r\n          if (cy < 0) {\r\n            continue;\r\n          }\r\n\r\n          for (let jx = 0; jx < w; jx++) {\r\n            if (shape[iy][jx] === BLOCK.X) {\r\n              continue;\r\n            }\r\n\r\n            cx = jx + x;\r\n            if (updateObj === null) {\r\n              updateObj = {};\r\n            }\r\n\r\n            if (!updateObj[cy]) {\r\n              updateObj[cy] = {}\r\n            }\r\n\r\n            updateObj[cy][cx] = {$set: type};\r\n          }\r\n        }\r\n\r\n        if (updateObj === null) {\r\n          return update(state, {\r\n            committed: {$set: {...state.now}},\r\n            now: {$set: {\r\n                type: null,\r\n                rotate: null,\r\n                x: null,\r\n                y: null,\r\n              }}\r\n          });\r\n        }\r\n\r\n        return update(state, {\r\n          board: updateObj,\r\n          committed: {$set: {...state.now}},\r\n          now: {$set: {\r\n              type: null,\r\n              rotate: null,\r\n              x: null,\r\n              y: null,\r\n            }}\r\n        });\r\n      },\r\n\r\n      [ROW_CLEAR]: (state, {payload: {rows}}) => {\r\n\r\n        const {board} = state;\r\n        const rowClearedBoard = [];\r\n        const boardWidth = board[0].length;\r\n        const boardHeight = board.length;\r\n\r\n        for (let i = 0; i < boardHeight; i++) {\r\n          if (rows.includes(i)) {\r\n            rowClearedBoard.unshift(new Array(boardWidth).fill(BLOCK.X))\r\n          } else {\r\n            rowClearedBoard.push(board[i])\r\n          }\r\n        }\r\n\r\n        return update(state, {\r\n          board: {$set: rowClearedBoard}\r\n        });\r\n      },\r\n\r\n      [CLEAR]: () => ({...defaultState}),\r\n    },\r\n    {...defaultState}\r\n);","import {combineActions, handleActions} from 'redux-actions';\r\nimport update from 'immutability-helper';\r\n\r\nimport {\r\n  READY,\r\n  GAME_IS_ON,\r\n  PAUSED,\r\n  RESUMED,\r\n  GAME_OVER,\r\n  LINE,\r\n  SCORE,\r\n  SPEED,\r\n  gameAction,\r\n} from '../action/game';\r\n\r\nconst {ready, gameIsOn, paused, resumed, gameOver} = gameAction;\r\n\r\nconst mapActionToState = {\r\n  [READY]: {\r\n    playing: false,\r\n    paused: false,\r\n  },\r\n  [GAME_IS_ON]: {\r\n    playing: true,\r\n    paused: false,\r\n  },\r\n  [PAUSED]: {\r\n    playing: true,\r\n    paused: true,\r\n  },\r\n  [RESUMED]: {\r\n    playing: true,\r\n    paused: false,\r\n  },\r\n  [GAME_OVER]: {\r\n    playing: true,\r\n    paused: false,\r\n  }\r\n\r\n};\r\n\r\nexport const game = handleActions(\r\n    {\r\n      [combineActions(ready, gameIsOn, paused, resumed, gameOver)]: (state, {type, payload}) => {\r\n        const toMerged = {\r\n          ...mapActionToState[type],\r\n          state: type,\r\n        };\r\n\r\n        if (type === PAUSED || type === RESUMED) {\r\n          toMerged.fromUser = payload.user;\r\n        }\r\n\r\n        if (type === GAME_OVER) {\r\n          toMerged.highScoreUpdated = payload.highScoreUpdated;\r\n        }\r\n\r\n        return update(state, {$merge: toMerged})\r\n      },\r\n\r\n      [LINE]: (state, {payload}) => update(state, {\r\n        line: {$merge: payload}\r\n      }),\r\n\r\n      [SCORE]: (state, {payload}) => update(state, {\r\n        score: {$merge: payload}\r\n      }),\r\n\r\n      [SPEED]: (state, {payload}) => update(state, {\r\n        speed: {$set: payload}\r\n      }),\r\n    },\r\n    {\r\n      state: 'READY',\r\n      playing: false,\r\n      paused: false,\r\n      fromUser: false,\r\n      highScoreUpdated: false,\r\n      score: {\r\n        high: 0,\r\n        last: 0,\r\n        now: 0,\r\n      },\r\n      line: {\r\n        all: 0,\r\n        last: 0,\r\n        now: 0,\r\n      }\r\n    }\r\n);","import { combineReducers } from 'redux';\r\nimport { pageState } from './pageState';\r\nimport { controller } from './controller';\r\nimport { block } from './block';\r\nimport { game } from './game';\r\n\r\nexport default combineReducers({\r\n  pageState,\r\n  controller,\r\n  block,\r\n  game,\r\n});\r\n","import { eventChannel } from 'redux-saga';\r\nimport { call, take, cancelled, put } from 'redux-saga/effects';\r\nimport lifecycle from 'page-lifecycle/dist/lifecycle.es5';\r\n\r\nimport {pageStateAction} from '../action/pageState';\r\n\r\nconst takeEventNames = ['active', 'passive', 'hidden'];\r\n\r\nconst makelifeCycleChannel = () => eventChannel(emit => {\r\n  const handler = event => {\r\n    if (takeEventNames.includes(event.newState)) {\r\n      emit(event.newState);\r\n    }\r\n  };\r\n\r\n  lifecycle.addEventListener('statechange', handler);\r\n\r\n  const unsubscribe = () => lifecycle.removeEventListener('statechange', handler);\r\n\r\n  return unsubscribe;\r\n});\r\n\r\nexport function* pageStateSaga() {\r\n  const chan = yield call(makelifeCycleChannel);\r\n  try {\r\n    while (true) {\r\n      yield put(pageStateAction[yield take(chan)]());\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      chan.close();\r\n    }\r\n  }\r\n}","import { eventChannel } from 'redux-saga';\r\nimport { call, take, cancelled, put } from 'redux-saga/effects';\r\n\r\nconst keyboardEvents = ['keydown', 'keyup'];\r\n\r\nconst KEYCODE_BUTTON_MAP = {\r\n  38: 'UP',\r\n  40: 'DOWN',\r\n  37: 'LEFT',\r\n  39: 'RIGHT',\r\n  32: 'SPACE',\r\n  13: 'ENTER',\r\n};\r\n\r\nconst makeKeyboardChannel = () => eventChannel(emit => {\r\n\r\n  let throttled = false;\r\n  let throttleDelay = 20;\r\n\r\n  const handler = e => {\r\n    if (e.type === 'keydown') {\r\n      if (throttled) return;\r\n      throttled = true;\r\n      setTimeout(() => {\r\n        throttled = false;\r\n      }, throttleDelay);\r\n    }\r\n\r\n    throttledHandler(e);\r\n  };\r\n\r\n  const throttledHandler = ({type, keyCode, which}) => {\r\n    let key = keyCode || which || null;\r\n    if (!key) return;\r\n\r\n    const pressed = type === 'keydown'?\r\n        true\r\n        : type === 'keyup'?\r\n            false\r\n            : null;\r\n\r\n    if (pressed === null) return;\r\n\r\n    key = KEYCODE_BUTTON_MAP[key];\r\n    if (typeof key === 'string') {\r\n      emit({key, pressed});\r\n    }\r\n  };\r\n\r\n  for (const eventName of keyboardEvents) {\r\n    window.addEventListener(eventName, handler);\r\n  }\r\n\r\n  const unsubscribe = () => {\r\n    for (const eventName of keyboardEvents) {\r\n      window.removeEventListener(eventName, handler);\r\n    }\r\n  };\r\n\r\n  return unsubscribe;\r\n});\r\n\r\nexport function* keyboardSaga() {\r\n  const chan = yield call(makeKeyboardChannel);\r\n  try {\r\n    while (true) {\r\n      const {key, pressed} = yield take(chan);\r\n      const action = {type: `${key}_${pressed ? 'TRUE' : 'FALSE'}`};\r\n      yield put(action);\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      chan.close();\r\n    }\r\n  }\r\n}","import {select, cancel, put, take, call, race, fork, delay} from 'redux-saga/effects';\r\n\r\nimport {\r\n  DOWN,\r\n  LEFT,\r\n  RIGHT,\r\n  ROTATE,\r\n  DROP,\r\n  SHIFT_NEXT,\r\n  blockAction,\r\n} from '../../action/block';\r\nimport {\r\n  gameAction,\r\n  PAUSED,\r\n  RESUMED,\r\n} from '../../action/game';\r\nimport {ACTIVE, HIDDEN} from '../../action/pageState';\r\nimport {Tetromino, BLOCK} from '../../model/Tetromino';\r\n\r\nconst mapInputToAction = {\r\n  'UP_TRUE': ROTATE,\r\n  'DOWN_TRUE': DOWN,\r\n  'LEFT_TRUE': LEFT,\r\n  'RIGHT_TRUE': RIGHT,\r\n  'SPACE_TRUE': DROP,\r\n};\r\n\r\nfunction* handleInput() {\r\n  while (true) {\r\n    const {type} = (yield race([\r\n      take('UP_TRUE'),\r\n      take('DOWN_TRUE'),\r\n      take('LEFT_TRUE'),\r\n      take('RIGHT_TRUE'),\r\n      take('SPACE_TRUE'),\r\n    ])).filter(v => v)[0];\r\n    yield put({\r\n      type: mapInputToAction[type]\r\n    });\r\n  }\r\n}\r\n\r\nfunction* blockMovePhase(timeoutMs) {\r\n  const inputTask = yield fork(handleInput);\r\n  const raceResult = yield race([\r\n    take(DROP),\r\n    delay(timeoutMs),\r\n    take(PAUSED),\r\n  ]);\r\n  yield cancel(inputTask);\r\n\r\n  if (raceResult[0]) {\r\n    return 'drop';\r\n  } else if (raceResult[1]) {\r\n    return 'timeout';\r\n  } else if (raceResult[2]) {\r\n    return 'paused';\r\n  } else {\r\n    return 'passed';\r\n  }\r\n}\r\n\r\nfunction* timeoutDown() {\r\n  const bY = yield select(({block}) => block.now.y);\r\n  yield put(blockAction.down());\r\n  const nY = yield select(({block}) => block.now.y);\r\n\r\n  return bY !== nY;\r\n}\r\n\r\nfunction* isPaused() {\r\n  return yield select(({game}) => ({paused: game.paused, fromUser: game.fromUser}));\r\n}\r\n\r\nexport default function* () {\r\n  const asyncTask = yield fork(function* () {\r\n    while (true) {\r\n      yield take(SHIFT_NEXT);\r\n      const {next} = yield select(({block}) => block);\r\n      if (next.length < 10) {\r\n        yield put(blockAction.pushNext());\r\n      }\r\n    }\r\n  });\r\n\r\n  let highScoreUpdated = false;\r\n\r\n  const pauseToggle = yield fork(function* () {\r\n    while (true) {\r\n      const _race = yield race([\r\n        take('ENTER_TRUE'),\r\n        take('PAUSE_RESUME_TRUE'),\r\n        take(ACTIVE),\r\n        take(HIDDEN),\r\n      ]);\r\n\r\n      const {paused, fromUser} = yield call(isPaused);\r\n      if (_race[0] || _race[1]) {\r\n        if (paused === false) {\r\n          yield put(gameAction.paused(true));\r\n        } else {\r\n          yield put(gameAction.resumed(true));\r\n        }\r\n      } else if (_race[2] && paused && !fromUser) {\r\n        yield put(gameAction.resumed());\r\n      } else if (_race[3] && !paused) {\r\n        yield put(gameAction.paused());\r\n      }\r\n    }\r\n  });\r\n\r\n  while (true) {\r\n    if ((yield call(isPaused)).paused) {\r\n      yield take(RESUMED);\r\n    }\r\n    let firstTimeoutDownFail = false;\r\n    let isDropped = false;\r\n    const speed = yield select(({game}) => game.speed);\r\n\r\n    let normalTimeoutMs = Math.floor(1000 * Math.pow(0.72, speed - 1)),\r\n        commitTimeoutMs = 150 * Math.min(speed, 15),\r\n        nowTimeoutMs = normalTimeoutMs;\r\n\r\n    let timeoutDownFailCount = 0;\r\n\r\n    let elapsedToCommit = 0, start, end;\r\n\r\n    if ((yield select(state => state.block.now)).type === null) {\r\n      yield put(blockAction.shiftNext());\r\n      elapsedToCommit = 3000;\r\n    } else {\r\n      start = new Date().getTime();\r\n    }\r\n\r\n    while (true) {\r\n      if ((yield call(isPaused)).paused) {\r\n        yield take(RESUMED);\r\n      }\r\n      let result = yield call(blockMovePhase, nowTimeoutMs);\r\n\r\n      if (result === 'paused') {\r\n        yield take(RESUMED);\r\n        result = yield call(blockMovePhase, nowTimeoutMs);\r\n      } else if (result === 'pass') {\r\n        continue;\r\n      } if (result === 'drop') {\r\n        isDropped = true;\r\n        break;\r\n      }\r\n\r\n      let timeoutDownResult = yield call(timeoutDown);\r\n\r\n      if (timeoutDownResult === false) {\r\n        if (firstTimeoutDownFail) {\r\n          break;\r\n        }\r\n\r\n        firstTimeoutDownFail = true;\r\n        timeoutDownFailCount++;\r\n        if (timeoutDownFailCount >= 3) {\r\n          break;\r\n        }\r\n        // 커밋 타임아웃은 speed가 올라갈수록 오히려 증가시켜 기회를 더 줌\r\n        // 단 스피드 15 초과시 더 증가하지 않음\r\n        nowTimeoutMs = Math.floor(commitTimeoutMs * (1 - (timeoutDownFailCount - 1) / 10));\r\n      } else {\r\n        firstTimeoutDownFail = false;\r\n        nowTimeoutMs = normalTimeoutMs;\r\n      }\r\n    }\r\n\r\n    if (elapsedToCommit === 0) {\r\n      end = new Date().getTime();\r\n      elapsedToCommit = end - start;\r\n    }\r\n    yield put(blockAction.commit());\r\n\r\n\r\n    // 커밋 후 처리\r\n\r\n    const state = yield select();\r\n    let line = { ...state.game.line };\r\n\r\n    // 게임 오버 판단\r\n    const {type, rotate, y} = state.block.committed;\r\n    const {h} = Tetromino[type].rotate[rotate];\r\n    if (y + h <= 0) {\r\n      break;\r\n    }\r\n\r\n    // 꽉 차서 삭제할 줄 계산\r\n    const {board} = state.block;\r\n    const clearLineArr = [];\r\n    line.now = 0;\r\n    let isLineFull;\r\n\r\n    for (let iy = y; iy < y + h; iy++) {\r\n      if (iy < 0) {\r\n        continue;\r\n      }\r\n      isLineFull = !board[iy].some(v => v === BLOCK.X);\r\n      if (isLineFull) {\r\n        line.now++;\r\n        clearLineArr.push(iy);\r\n      }\r\n    }\r\n\r\n    // 점수 계산\r\n    const scoreState = { ...state.game.score };\r\n    const\r\n        // speed 별 기본 점수\r\n        speedBase = 200 * speed,\r\n\r\n        // 3초 이내로 commit 시킨 경우 비례하여 최대 200%의 기본 점수 가산\r\n        fast = elapsedToCommit > 3000 ? 1 : 2 - (elapsedToCommit / 3000),\r\n\r\n        // drop으로 commit 시킨 경우 획득 점수의 20% 가산\r\n        drop = isDropped ? 1.2 : 1,\r\n\r\n        // 개별 블록 점수\r\n        blockScore = speedBase * fast * drop,\r\n\r\n        // 최종 점수: 개별 블록 점수 * (삭제된 줄 수 + 1)\r\n        finalScore = Math.floor(blockScore * (line.now + line.last + 1));\r\n\r\n    scoreState.now += finalScore;\r\n\r\n    // highScore 갱신 여부 확인\r\n    if (!highScoreUpdated) {\r\n      highScoreUpdated = scoreState.high < scoreState.now;\r\n    }\r\n\r\n    if (highScoreUpdated) {\r\n      scoreState.high = scoreState.now;\r\n    }\r\n\r\n    // 점수 업데이트\r\n    yield put(gameAction.score(scoreState));\r\n\r\n    // 콤보 UI 및 줄 삭제 업데이트\r\n    if (line.now > 0) {\r\n      line.all += line.now;\r\n      line.last += line.now;\r\n      yield put(gameAction.line({all: line.all, last: line.last}));\r\n\r\n      yield put(blockAction.rowClear(clearLineArr));\r\n    } else {\r\n      if (line.last > 0) {\r\n        yield put(gameAction.line({last: 0}));\r\n      }\r\n    }\r\n\r\n    const nowSpeed = state.game.speed;\r\n\r\n    // 10줄 클리어 할 때마다 speed 증가\r\n    if (nowSpeed < 20 && line.all > nowSpeed * 10) {\r\n      yield put(gameAction.speed(nowSpeed + 1));\r\n    }\r\n\r\n  }\r\n\r\n  yield cancel(asyncTask);\r\n  yield cancel(pauseToggle);\r\n  yield put(gameAction.gameOver(highScoreUpdated));\r\n}","import {all, select, cancel, put, take, takeEvery, call} from 'redux-saga/effects';\r\n\r\nimport {\r\n  READY,\r\n  GAME_IS_ON,\r\n  gameAction, GAME_OVER,\r\n} from '../../action/game';\r\n\r\nimport {blockAction} from '../../action/block';\r\n\r\nimport {\r\n  buttonAction\r\n} from '../../action/controller';\r\n\r\nimport playing from './playing';\r\n\r\nfunction* onReady() {\r\n  yield put(gameAction.speed(1));\r\n  yield put(blockAction.clear());\r\n  yield put(gameAction.line({\r\n    all: 0, last: 0, now: 0,\r\n  }));\r\n  yield all([\r\n      yield takeEvery('LEFT_TRUE', function* () {\r\n        const {speed} = yield select(state => state.game);\r\n        if (speed > 1) {\r\n          yield put(gameAction.speed(speed - 1));\r\n        }\r\n      }),\r\n      yield takeEvery('RIGHT_TRUE', function* () {\r\n        const {speed} = yield select(state => state.game);\r\n        if (speed < 20) {\r\n          yield put(gameAction.speed(speed + 1));\r\n        }\r\n      }),\r\n      yield takeEvery('SWITCH_FALSE', function* () {\r\n        yield put(buttonAction.inversePositionFalse())\r\n      }),\r\n      yield take('SPACE_TRUE', function* () {\r\n      })\r\n  ]);\r\n\r\n  yield put(gameAction.gameIsOn());\r\n  yield cancel();\r\n}\r\n\r\nfunction* onGame() {\r\n  yield put(gameAction.score({now: 0}));\r\n  yield put(blockAction.clear());\r\n  yield put(blockAction.pushNext());\r\n  yield call(playing);\r\n}\r\n\r\nfunction* onGameover () {\r\n  // lastScore에 지난 게임 점수 등록\r\n  const lastNowScore = yield select(state => state.game.score.now);\r\n  yield put(gameAction.score({last: lastNowScore}));\r\n  yield take('SPACE_TRUE');\r\n  yield put(gameAction.ready());\r\n}\r\n\r\nexport default function* () {\r\n  yield all([\r\n    yield takeEvery(READY, onReady),\r\n    yield takeEvery(GAME_IS_ON, onGame),\r\n    yield takeEvery(GAME_OVER, onGameover),\r\n  ]);\r\n  const gameState = yield select(state => state.game.state);\r\n  switch (gameState) {\r\n    case READY:\r\n      yield call(onReady);\r\n      break;\r\n    case GAME_OVER:\r\n      yield call(onGameover);\r\n      break;\r\n    default:\r\n      const {paused, fromUser} = yield select(state => state.game);\r\n      if (paused && !fromUser) {\r\n        yield put(gameAction.resumed());\r\n      }\r\n      yield call(playing);\r\n      break;\r\n  }\r\n}","import {fork, all} from 'redux-saga/effects';\r\n\r\nimport {pageStateSaga} from './pageState';\r\nimport {keyboardSaga} from './controller';\r\nimport gameSaga from './game/game';\r\n\r\nexport default function* () {\r\n  yield fork(pageStateSaga);\r\n  yield fork(keyboardSaga);\r\n  yield all([\r\n      gameSaga(),\r\n  ]);\r\n}","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootReducer from '../reducer/index';\r\nimport rootSaga from '../saga/index';\r\nimport Storage from \"redux-state-save\";\r\nimport storageAvailable from './storageAvailable';\r\n\r\nconst lastUpdate = '1547361002349';\r\nlet storage;\r\n\r\nif (storageAvailable('localStorage')) {\r\n    const localKey = `react-redux-tetris-${lastUpdate}`;\r\n\r\n    // 최신 버전의 state가 없으면 기존 state는 삭제함\r\n    if (!localStorage.getItem(localKey)) {\r\n        const keys = Object.keys(localStorage);\r\n        for (let key of keys) {\r\n            if (key.includes('react-redux-tetris-')) {\r\n                localStorage.removeItem(key);\r\n            }\r\n        }\r\n    }\r\n\r\n    storage = new Storage();\r\n    storage.setConfig({\r\n        storage_type: 'local_storage',\r\n        local_key: localKey\r\n    });\r\n}\r\n\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst composeEnhancers =\r\n    typeof window === 'object' &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n          // Specify extension’s options like name, actionsBlacklist, actionsCreators, serialize...\r\n        }) : compose;\r\n\r\nlet enhancer;\r\n\r\nif (storage) {\r\n    enhancer = composeEnhancers(\r\n        applyMiddleware(sagaMiddleware, storage.saveState()),\r\n    );\r\n} else {\r\n    enhancer = composeEnhancers(\r\n        applyMiddleware(sagaMiddleware),\r\n    );\r\n}\r\n\r\nlet store = createStore(rootReducer, /* preloadedState, */ enhancer);\r\n\r\nif (storage) {\r\n    store = storage.loadState(store);\r\n}\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\n/*store.subscribe(() => {\r\n  console.dir(store.getState());\r\n});*/\r\n\r\nexport default store;","// Code from\r\n// https://developer.mozilla.org/ko/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\r\n\r\nexport default function storageAvailable(type) {\r\n  try {\r\n    var storage = window[type],\r\n        x = '__storage_test__';\r\n    storage.setItem(x, x);\r\n    storage.removeItem(x);\r\n    return true;\r\n  }\r\n  catch(e) {\r\n    return e instanceof DOMException && (\r\n            // Firefox를 제외한 모든 브라우저\r\n        e.code === 22 ||\r\n        // Firefox\r\n        e.code === 1014 ||\r\n        // 코드가 존재하지 않을 수도 있기 때문에 테스트 이름 필드도 있습니다.\r\n        // Firefox를 제외한 모든 브라우저\r\n        e.name === 'QuotaExceededError' ||\r\n        // Firefox\r\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n        // 이미 저장된 것이있는 경우에만 QuotaExceededError를 확인하십시오.\r\n        storage.length !== 0;\r\n  }\r\n}","import \"core-js/stable\";\r\nimport \"regenerator-runtime/runtime\";\r\nimport React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from './store/index';\r\n\r\nrender(\r\n    <Provider store={store}>\r\n      <App/>\r\n    </Provider>\r\n    , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}