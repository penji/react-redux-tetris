{"version":3,"sources":["resource/switch.png","model/Tetromino.js","theme/index.js","theme/BASE.js","component/controller/buttons.js","component/controller/Controller.js","component/infoboard/Counter.js","component/infoboard/components.js","component/block/Cell.js","component/block/NextBlock.js","component/infoboard/NextBlocks.js","component/infoboard/InfoBoard.js","component/block/Block.js","component/blockboard/BlockBoard.js","component/Message.js","component/MainFrame.js","GlobalStyle.js","App.js","serviceWorker.js","util/util.js","action/controller.js","action/pageState.js","reducer/pageState.js","reducer/controller.js","action/info.js","reducer/info.js","action/block.js","reducer/block.js","action/game.js","reducer/game.js","reducer/index.js","saga/pageState.js","saga/controller.js","saga/game/playing.js","saga/game/game.js","saga/index.js","store/index.js","index.js"],"names":["module","exports","BLOCK","X","D","I","O","T","J","L","S","Z","NORMAL_TYPES","Tetromino","_Tetromino","Object","defineProperty","maxRotate","rotate","0","shape","w","h","dx","dy","1","2","3","theme","BASE","MainFrame","background","block","Block","Cell","mapTypeToColor","_mapTypeToColor","blackboard","BlackBoard","controller","buttons","Move","normal","shadowNormal","active","shadowActive","SpaceBtn","Controller","infoboard","components","Title","fontSize","color","Value","Counter","InfoBoard","NextBlocks","borderColor","Message","StartMessage","PauseMessage","Base","styled","button","_templateObject","_templateObject2","_ref","_ref2","_ref3","_ref4","defaultProps","_templateObject3","_ref5","_ref6","_ref7","inversed","_ref8","_ref9","UpBtn","_templateObject4","_ref10","DownBtn","_templateObject5","_ref11","LeftBtn","_templateObject6","_ref12","RightBtn","_templateObject7","_ref13","SwitchBtn","_templateObject8","SwitchPNG","touch","Up","_ref14","type","pressed","onMouseTouchEvent","react_default","a","createElement","className","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","Down","_ref15","Left","_ref16","Right","_ref17","Space","_ref18","Switch","_ref19","StyledDiv","div","Controller_templateObject","props","changeButtonState","playing","buttons_Up","buttons_Down","buttons_Left","buttons_Right","buttons_Space","buttons_Switch","connect","state","objectSpread","game","dispatch","action","concat","StyledCountUp","CountUp","Counter_templateObject","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","begin","start","end","value","useEasing","separator","duration","prevProps","prevState","snapshot","setState","Component","Label","label","components_templateObject","components_templateObject2","components_templateObject3","Div","components_templateObject4","HighScore","info","highScore","Counter_Counter","LastScore","lastScore","NowScore","nowScore","Speed","speed","Cell_templateObject","Wrapper","NextBlock_templateObject","Row","NextBlock_templateObject2","NextBlock","_ref$type","_ref$rotate","style","map","row","y","key","cellType","x","NextBlocks_templateObject","Board","NextBlocks_templateObject2","Table","table","NextBlocks_templateObject3","next","nextArr","slice","NextBlocks_Div","i","NextBlock_NextBlock","InfoBoard_templateObject","InfoBoard_StyledDiv","infoboard_NextBlocks","Block_templateObject","Block_templateObject2","_Tetromino$type$rotat","targetShape","blockProps","length","Block_Wrapper","assign","Block_Row","BlockBoard_templateObject","hidden","BlockBoard_templateObject2","BlockBoard","board","now","paused","t","BlockBoard_StyledDiv","BlockBoard_Row","Block_Block","blink","keyframes","Message_templateObject","Message_templateObject2","Message_templateObject3","StartMsgLb","Message_templateObject4","PauseMsgLb","Message_templateObject5","Message_StyledDiv","Scalable","MainFrame_templateObject","frameWidth","frameHeight","frameScale","resizeTimer","BASE_SIZE","onResize","bind","assertThisInitialized","onResizeDebounced","scale","window","addEventListener","removeEventListener","clearTimeout","setTimeout","newScale","changeState","arguments","undefined","width","height","ratio","_window","innerWidth","innerHeight","infoboard_InfoBoard","blockboard_BlockBoard","controller_Controller","GlobalStyle","createGlobalStyle","GlobalStyle_templateObject","App","Fragment","MainFrame_MainFrame","src_GlobalStyle","Boolean","location","hostname","match","makeCombineActionType","actionCreators","combineActions","apply","toConsumableArray","values","PAGE_STATE","ACTIVE","PASSIVE","HIDDEN","pageStateAction","createActions","_createActions","pageState","lifecycle","handleAction","old","payload","actionNames","actionMap","_i","buttonAction","s","split","infoAction","info_createActions","score","highScoreUpdate","handleActions","_handleActions","update","$set","_ref3$payload","updateObj","DOWN","LEFT","RIGHT","ROTATE","DROP","SHIFT_NEXT","blockAction","block_createActions","blocks","randomBlocks","push","splice","Math","floor","random","rows","Array","isArray","down","left","right","defaultState","defaultValue","fill","getClearBoard","committed","cachedCollisionCheck","_cachedCollisionCheck","getDropPositionY","_state$now3","_Tetromino$type$rotat4","maxK","jx","iy","k","block_handleActions","actionType","_state$now","boardWidth","boardHeight","collisionCheck","_$set","_state$now4","nextNow","_$set2","_rotateCollisionCheck","newDx","newDy","collapsed","_state$now2","nextRotate","_Tetromino$type$rotat2","cx","cy","ty","_Tetromino$type$rotat3","_shape","_w","_h","isBefore","result","rotateCollisionCheck","_state$now5","_$set3","$push","_$set4","newBlock","slicedToArray","newNow","$splice","_state$now6","_Tetromino$type$rotat5","rowClearedBoard","includes","unshift","READY","PAUSED","RESUMED","GAME_IS_ON","gameAction","game_createActions","mapActionToState","_mapActionToState","combineReducers","pageStateSaga","takeEventNames","makelifeCycleChannel","eventChannel","emit","handler","event","newState","chan","regenerator_default","wrap","_context","prev","sent","t0","put","take","t1","t2","cancelled","close","finish","stop","_marked","keyboardSaga","keyboardEvents","KEYCODE_BUTTON_MAP","38","40","37","39","32","13","makeKeyboardChannel","throttled","e","throttledHandler","keyCode","which","eventName","_i2","controller_marked","handleInput","blockMovePhase","timeoutDown","onGameover","mapInputToAction","UP_TRUE","DOWN_TRUE","LEFT_TRUE","RIGHT_TRUE","SPACE_TRUE","race","v","filter","playing_marked","timeoutMs","inputTask","raceResult","_context2","fork","delay","cancel","abrupt","_marked2","bY","nY","_context3","select","_marked3","_context4","_marked4","playing_callee3","asyncTask","isPaused","clearLine","pauseToggle","firstTimeoutDownFail","isDropped","elapsedToCommit","_state$block$committe","_type","clearLineArr","blockScore","finalScore","nowSpeed","_context7","mark","_callee","_context5","pushNext","all","bonus","_callee2","_race","_context6","resumed","pow","shiftNext","Date","getTime","commit","some","rowClear","speedUp","_marked5","onReady","onGame","initialize","takeEvery","speedDown","_callee3","inversePosition","t3","_callee4","t4","t5","gameIsOn","game_marked","game_marked2","clear","game_marked3","_context8","ready","game_marked4","_callee5","_context9","game_marked5","saga_callee","gameSaga","saga_marked","sagaMiddleware","createSagaMiddleware","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","store","createStore","rootReducer","run","rootSaga","render","es","src_App","document","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.8970f485.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAHgCAMAAABKCk6nAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACBFBMVEUAAADp7+/s8PHs8PHs8PHs8PHs8PHu7u7j4//t8PLs8PHs8PHs8PDs8PHr9fXt8PLs8PHq7+/s8PHr7vLs8PHt7/H////s8PHs8PHv7+/s8PHr8vLs8PHr7+/s8PHs7/Ls7/H////s8PLm5ubt8PHt7e3s8PDr8PDs7/Ls8PHr7/Hr8PDr8PDs8PLs8PHs8PHs8PHs8PDr8vLr8PDs7/Ht8PDs8PHs8PLq7/Po6Ojt8PLs8/Pt8PDs8PHt8fHt8vLv7+/s8PHr8PLp9PTo8/Ps8PDs8PLr8PLs8PLs8fHb///s7/Hr8PHu7vPs8PHt8PDs8PDs8PHs8PHt8PDs8PLt7fPs8fHt8PDr8fHt7/Hs7/Lt7e3r8fHq9PTs8PHw8PDr8PDs8PHp8PDs8PHr7/Ls8fHt7e3r8PDu8fHw8PD////y8vLs8fHs8PHq8fHr8fHt8PDr8PHt7/Ls8PLf///s7/Hu7vTs8PHs7/Ht8/Ps8PHs8PHs8PHr8fHr6+vt7/Ht8vLs8PH////s7/Hs8PHr8PD////r8PDs8PHs7+/u8vLr7+/s8fHs8PHt8fHr7/Lr8PH////r8fHr8fHs8fHs8PHs8PLt8PHt8PDr8fHs8fHu7u7p8PDs8PDt7/Ht8fHs8PHt8PLs8PHt7/Ls8PDr8fHs7/Hs8PDs8PHy8vLs8PEAAABor8TwAAAAqnRSTlMAL5bY+NeVLgmZ/ZfAyhmY4jDzTfxxBfe7ENsn7UD5X5ECrArPHOQzT/6Am2e/3+7xrSY0k1TNqj4LmilF8Ec6H+p0Fxb2dtGrXQeStizajNPy+4u9K5BXw29gDo0YvBGczCP0TuUdZUkhBBRqxiVZirdyvgiULfXVKtbI4UsNtDnpAaTgZgMyy1I7QTfnwnOpBluO1LiHtVNYaw8iiXBI72OlYq+PxWnZExB2rn8AAAABYktHRACIBR1IAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wEKDSsAcHFkYgAADERJREFUeNrt3QufVVUdxvHNbRgGQRhGsCACxWo0nKGIygJFQ1FEGMILKWWZlFBmBgPhvZLuF7tbVnav/SoTHIazz9lnn335r/Wstfp938Bee/0+jjPPDDNZBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPyfWLJ02fLlK8ZWqs8BJ8ZXTeRXTKweV58F9savyxetWas+Dcxdn/dYt0R9HBhbP9EbOJ/coD4QbC3Ni6ZuUJ8Ippbl/a7fqD4TDG0aCJzf+B71oWAnL/HezepTwUxZ4HzL+9THgpXSwPnW96vPBSP5ENu2q08GE8MC5zfdrD4aLAwNnO+4RX02GBgeOP/AB9WHQ3cVgfPJD6lPh86qAufTt6qPh67yarexW0ZuRGB2y9iNCsxuGbmRgdkt4zY6MLtl1GoEZreMWa3A7JbxqheY3TJaNQOzW8aqbmB2y0jVDsxuGaf6gdkto9QkMLtlhBoFZreMT7PA7JbRaRiY3TI2TQOzW0ameWB2y6i0CMxuGZM2gdktI9IqMLtlPNoFZreMRsvA7JaxaB2Y3TIO7QOzW0ahQ2B2yxh0CcxuGYFOgdktw9cxMLtl6LoGZrcMXOfA7JZh6x6Y3TJoBoHZLUNmEZjdMmA2gdktg2UUmN0yVFaB2S0DZRaY3TJMdoHZLYNkGZjdMkCmgdktw2MbmN0yOMaB2S1DYx2Y3TIw5oHZLcPiIDC7ZUhcBGa3DIiTwOyW4XATmN0yGI4Cs1uGwllgdsswuAvMbhkEh4HZLUPgMjC7ZQCcBm62W6788G07b5+ZcnuipM3u+ojnwPV3y4/uXqe+nhRsucV34Fq75faP7VHfTCo+7j1wjd3yEzvU15KOWf+BR+2Wn7xjWn0rKREErt4tP7VMfSVpUQSu2i0/vVd9I4nRBB66W+7bpL6Q1IgCD9kt76SvNVXg0t3yrv3q60iPLHDJbrn9OvVtJEgXeHC3vFt9GSkSBu7fLe+ZVV9GiqSBi7vlUvVdJEkbuHe3/MwB9V0kSRy4Z7e8V30VaVIHvrZb3qe+ijTJA1/dLe9S30SiAgicHxx/58H3q28iUSEEzm98IMsOqW8iUUEEzrdl2YPqm0hUGIGnDmcPqW8iUWEEzo9kfB/YjUACH82YOdwIJPBcdkx9E4kKJPDebEZ9E4kKJPDRbIX6JhIVSODPZsfVN5GoMAJPPZwdUd9EosII/EiWPaq+iUQFEfjyVLl2Qn0VaQoh8JVvNmSPqa8iTQEEXvhnDifUV5EmeeCtn1t48uOMlS6oA/f8U8Mn1HeRJHHg3n8sfJIfm3VAG/jzX+h9Nj/47oA08JPFX9ix8Yvq20iQMPDgr9z5Ep9nmdMFfqrkl2Z9mW8aWpMFfrr0197dP6G+kNSoAu84lZX6Cv8N2xIFHv6rZ786p76StGgCV/3y6GcYpS0pAi+uk+VO38sn02ZmBYFH/wGHM4/wcdrILv+Ba/0Jlse/9nV+zayBmWe9By6uk1X/GX/juW8+tH+r+opiNrdroK/zwE/yZ9C03OblDxnKOe37FL/SX85l36f5oxx6DvsOWyfhk7u+/GGsIDjry5+2C4OjvCPWSXjjpi9/XjYYTvryB6LD4aJv7XUS7jnoyzoZEvO8rJNhse7LOhkY476sk6Gx7cs6GRzTvqyT4bHsyzoZILu8rJNBMuvLOhkmq76sk4Ey6ss6GSqbvqyTwbLIyzoZMIO+rJMh696XdTJonfuyToata1/WycB17Ms6GbpOeVknw9elL+tkBDr0ZZ2MQfu+rJNRaN2XdTIOLfOyTsaiXV/WyWi06ss6GY82fVknI9KiL+tkTJr3ZZ2MStO8rJORadiXdTI2zfqyTkanUV/Wyfg06cs6GaH6eVkno1S7L+tknOr2ZZ2MVM2+rJOxqteXdTJatfqyTsarRl7WyZiN7ss6GbWRfVkn4zaqL+tk5Eb0ZZ2MXWVe1sn4VfVlnUxARV/WyRQM78s6mYShfVkn0zCsL+tkIsrzsk4mo7Qv62Q6yvqyTiZkE+tk2lYM9F3FOpmSsb68U8+rTwRTSyYKfSc3qA8EY6t7+65brz4OrI1/61rfNWvVp4G9s0sXPkpPnxtXnwVOzB85Onn+wqFvq8/hzMpzFw9surh7Xn0OOLH4IWpi7Kz6LLB38oVrn2Qcp3ByVr7Y+2XCUvVxYOylucLX+RP8fzgtJ6b6lrpz6hPB0OnVeb+L6jPBzsuvDH6r7ID6UDDzzIWyb3arTwUrr76WEzhhjx7ICZyu79w6nRM4XQ98N88JnK4zj+UETtjh7+UETti+vTmBE/b6sZzA6bp0KM8JnK6ydZLA6ShfJwmciiHrJIETMWydJHAShq+TBE5BxTpJ4ARUrZMEjl/lOkng6FWvkwSO3Yh1ksBxG7lOEjhqo9dJAsesxjpJ4IjVWScJHK9a6ySBY1VznSRwpOqukwSOU+11ksBRqr9OEjhGDdZJAkeoyTpJ4Og0WycJHJuG6ySBI9N0nSRwXBqvkwSOSvN1ksARabNOEjgerdZJAkej3TpJ4Fi0XCcJHIm26ySB49B6nSRwDDqskwSOQJd1ksDh67ROEjh43dZJAoeu4zpJ4LB1XicJHLTu6ySBQ2awThI4YBbrJIHDZbJOEjhYNuskgQNltU4SOExm6ySBg2S3ThI4RIbrJIEDZLlOEjg4tuskgUNjvE4SODDW6ySBw2K+ThI4KPbrJIFD4mCdJHA4nKyT1YFPHZx1/cyEHZu5fecdr8/X7etmnSwY6LtFfUcpePHQ9+v0dbROFvQ/8yb13aTiBz/cPqqvq3WyoP+hc+qLSceeH1X3dbZOFvQ/VX0rKZleffPwvA7XyQICu7Ri87C+LtfJAgI7NfPj8r5O18kCAru1/KWyvm7XyQICO3bgJ4N9Ha+TBQR27aen+u/Y9TpZQGDnfnapcMPu18kCArt3Q+8Fe1gnCwjs3tzaa/frY50sILAHhxav18s6WUBgD86fWbhdP+tkAYF9+PmVu/W1ThYQ2Ic9l692/BeKRxPYi3e+Fn7D86fPCwjsxS+zbLfmyQT2Yls2P6V5MoG9eCX7lejJBPbiYvZr0ZMJ7MUW2c9CEdiLuUz1w8gE9mI5H6LT9lr2hOjJBPbivuwwXyal7DdZ5vf7/IsI7MVvs+yN30meTGAvfn/5mw0HFU8msA8TJ9/9dqHg0QT2YefC7b65yfujCezDH65e7538yE6KZv+4eL9vXfT8bAJ78KeeC37Z8yfTBHZv7z29N3z6nNeHE9i9P/fd8QmfoxaBnVuzsf+S/+LxW0sEdu3tt7IB8/zz0WQc25CVWLvG1/MJ7Nb0X7NSZ//m6QAEdurY37MhfO2WBHZpdl82nJ/dksAOvfBsVsXLbtn/UH4Rmpm3776UVfOxW/Y/8x/qa0nF3D/PZCN52C37H7l5Rn0zKZj6179fHp0387FbDjzy1EE+Snewdf9/Hnzuzf/WqnuF692y/knghuPdUv16cLxbqt8OjndL9cshc7tbqt8NlzncLdWvhnc52y3VL4YFrnZL9XvhKke7pfq1sMjNbql+K1zjZLdUvxR6Odgt1a+EAvvdUv1GKDLfLdUvhD7Wu6X6fdDPeLdUvw4G2O6W6rdBCcvdUv0uKGO4W6pfBaXsdkv1m6Cc2W6pfhEMYbVbqt8DQ9nsluq3wHAmu6X6JVDBYrdUvwOqGOyW6ldApe67pfoNUK3zbql+AYzScbdUHx8jddst1afHaJ12S/XhUUOX3VJ9dtTRYbdUHx31tN4t1QdHTW13S/W5UVfL3VJ9bNTWbrdUnxr1tdot1YdGA212S/WZ0Ujz3VJ9YjTTeLdUHxgNNd0t1edFUw13S/Vx0Viz3VJ9WrTQZLdUnxVtNNgt1UdFK/V3S/VJ0U7t3VJ9ULRUd7dUnxNt1dwt1cdEe7V2S/Uh0UGd3VJ9RnRRY7dUHxGdjN4t1SdENyN3S/UB0dWI3VJ9PHRWvVuqT4fuKndL9eFgoGq3VJ8NFip2S/XRYGL4bqk+GYwM2y3V54KVIbul+lgwU75bqk8FO2W75Xn1oWBo46qBwBfUZ4Kp5/t3y93qE8HWhslC34nD6gPB2Pp1vYHH1MeBud7d8vhZ9Wlgb3xseuHj8xh90/Tw7gvnJ48emVefAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDlf1puK3OWi8dVAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAxLTEwVDEyOjQzOjAwKzAxOjAwmletzQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMS0xMFQxMjo0MzowMCswMTowMOsKFXEAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\"","export const BLOCK = {\r\n  X:'X', D:'D', I:'I', O:'O', T:'T', J:'J', L:'L', S:'S', Z:'Z'\r\n};\r\nexport const NORMAL_TYPES = [\r\n    BLOCK.I, BLOCK.O, BLOCK.T, BLOCK.J, BLOCK.L, BLOCK.S, BLOCK.Z,\r\n];\r\n\r\nexport const Tetromino = {\r\n  [BLOCK.I]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.I,BLOCK.I,BLOCK.I,BLOCK.I]\r\n        ],\r\n        w: 4,\r\n        h: 1,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n        ],\r\n        w: 1,\r\n        h: 4,\r\n        dx: 2,\r\n        dy: -1\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.I,BLOCK.I,BLOCK.I,BLOCK.I]\r\n        ],\r\n        w: 4,\r\n        h: 1,\r\n        dx: -2,\r\n        dy: 2\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n          [BLOCK.I],\r\n        ],\r\n        w: 1,\r\n        h: 4,\r\n        dx: 1,\r\n        dy: -2\r\n      },\r\n    }\r\n  },\r\n  [BLOCK.O]: {\r\n    maxRotate: 0,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.O,BLOCK.O],\r\n          [BLOCK.O,BLOCK.O],\r\n        ],\r\n        w: 2,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.T]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.T,BLOCK.X],\r\n          [BLOCK.T,BLOCK.T,BLOCK.T]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.T,BLOCK.X],\r\n          [BLOCK.T,BLOCK.T],\r\n          [BLOCK.T,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.T,BLOCK.T,BLOCK.T],\r\n          [BLOCK.X,BLOCK.T,BLOCK.X],\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.T],\r\n          [BLOCK.T,BLOCK.T],\r\n          [BLOCK.X,BLOCK.T]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.J]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.J,BLOCK.X,BLOCK.X],\r\n          [BLOCK.J,BLOCK.J,BLOCK.J]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.J,BLOCK.J],\r\n          [BLOCK.J,BLOCK.X],\r\n          [BLOCK.J,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.J,BLOCK.J,BLOCK.J],\r\n          [BLOCK.X,BLOCK.X,BLOCK.J]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.J],\r\n          [BLOCK.X,BLOCK.J],\r\n          [BLOCK.J,BLOCK.J]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.L]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.X,BLOCK.L],\r\n          [BLOCK.L,BLOCK.L,BLOCK.L]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.L,BLOCK.X],\r\n          [BLOCK.L,BLOCK.X],\r\n          [BLOCK.L,BLOCK.L]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.L,BLOCK.L,BLOCK.L],\r\n          [BLOCK.L,BLOCK.X,BLOCK.X]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.L,BLOCK.L],\r\n          [BLOCK.X,BLOCK.L],\r\n          [BLOCK.X,BLOCK.L]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.S]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.S,BLOCK.S],\r\n          [BLOCK.S,BLOCK.S,BLOCK.X]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.S,BLOCK.X],\r\n          [BLOCK.S,BLOCK.S],\r\n          [BLOCK.X,BLOCK.S]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.S,BLOCK.S],\r\n          [BLOCK.S,BLOCK.S,BLOCK.X]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.S,BLOCK.X],\r\n          [BLOCK.S,BLOCK.S],\r\n          [BLOCK.X,BLOCK.S]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      }\r\n    }\r\n  },\r\n  [BLOCK.Z]: {\r\n    maxRotate: 3,\r\n    rotate: {\r\n      0: {\r\n        shape: [\r\n          [BLOCK.Z,BLOCK.Z,BLOCK.X],\r\n          [BLOCK.X,BLOCK.Z,BLOCK.Z]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: 0,\r\n        dy: 0\r\n      },\r\n      1: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 1,\r\n        dy: 0\r\n      },\r\n      2: {\r\n        shape: [\r\n          [BLOCK.Z,BLOCK.Z,BLOCK.X],\r\n          [BLOCK.X,BLOCK.Z,BLOCK.Z]\r\n        ],\r\n        w: 3,\r\n        h: 2,\r\n        dx: -1,\r\n        dy: 1\r\n      },\r\n      3: {\r\n        shape: [\r\n          [BLOCK.X,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.Z],\r\n          [BLOCK.Z,BLOCK.X]\r\n        ],\r\n        w: 2,\r\n        h: 3,\r\n        dx: 0,\r\n        dy: -1\r\n      },\r\n    }\r\n  }\r\n};","import BASE from './BASE';\r\n\r\nexport default {\r\n  BASE,\r\n}","import {BLOCK} from '../model/Tetromino';\r\n\r\nexport default {\r\n  MainFrame: {\r\n    background: '#7F8C8D',\r\n  },\r\n  block: {\r\n    Block: {\r\n\r\n    },\r\n    Cell: {\r\n      mapTypeToColor: {\r\n        [BLOCK.X]: 'transparent',\r\n        [BLOCK.D]: '#B5C2C3',\r\n        [BLOCK.I]: '#C0392B',\r\n        [BLOCK.O]: '#F39C12',\r\n        [BLOCK.T]: '#F1C40F',\r\n        [BLOCK.J]: '#27AE60',\r\n        [BLOCK.L]: '#2980B9',\r\n        [BLOCK.S]: '#34495E',\r\n        [BLOCK.Z]: '#8E44AD',\r\n      },\r\n    },\r\n  },\r\n  blackboard: {\r\n    BlackBoard: {\r\n      background: '#ECF0F1',\r\n    },\r\n  },\r\n  controller: {\r\n    buttons: {\r\n      Move: {\r\n        normal: '#3498DB',\r\n        shadowNormal: '#2980B9',\r\n        active: '#2980B9',\r\n        shadowActive: '#264B81',\r\n      },\r\n      SpaceBtn: {\r\n        normal: '#E74C3C',\r\n        shadowNormal: '#C0392B',\r\n        active: '#C0392B',\r\n        shadowActive: '#7A2A1E',\r\n      },\r\n    },\r\n    Controller: {\r\n      background: '#BDC3C7',\r\n    },\r\n  },\r\n  infoboard: {\r\n    components: {\r\n      Title: {\r\n        fontSize: 10,\r\n        color: '#34495E',\r\n      },\r\n      Value: {\r\n        fontSize: 15,\r\n        color: '#505050'\r\n      },\r\n    },\r\n    Counter: {\r\n      fontSize: 15,\r\n      color: '#505050',\r\n    },\r\n    InfoBoard: {\r\n      background: '#ECF0F1',\r\n    },\r\n    NextBlocks: {\r\n      borderColor: '#7F8C8D',\r\n    },\r\n  },\r\n  Message: {\r\n    StartMessage: {\r\n      color: '#34495E',\r\n    },\r\n    PauseMessage: {\r\n      color: '#34495E',\r\n      background: '#BDC3C7',\r\n    },\r\n  },\r\n};","import React from 'react';\r\n\r\nimport styled from 'styled-components';\r\nimport theme from '../../theme/index';\r\n\r\nimport SwitchPNG from '../../resource/switch.png';\r\n\r\nconst Base = styled.button`\r\n  -webkit-tap-highlight-color: rgba(255,255,255,0);\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  display: inline-block;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  outline: none;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  box-shadow: 0 5px #999;\r\n  \r\n  &.active, :active {\r\n    box-shadow: 0 3px #666;\r\n    transform: translateY(2px);\r\n  }\r\n`;\r\n\r\nconst Move = styled(Base)`\r\n  color: #fff;\r\n  background-color: ${({theme}) => theme.normal};\r\n  box-shadow: 0 5px ${({theme}) => theme.shadowNormal};\r\n  width: 45px;\r\n  height: 45px;\r\n  padding-top: 3px;\r\n  \r\n  &.active, :active {\r\n    background-color: ${({theme}) => theme.active};\r\n    box-shadow: 0 3px ${({theme}) => theme.shadowActive};\r\n  }\r\n`;\r\n\r\nMove.defaultProps = {\r\n  theme: theme.BASE.controller.buttons.Move\r\n};\r\n\r\nconst SpaceBtn = styled(Base)`\r\n  padding: 60px 60px;\r\n  border-radius: 100%;\r\n  background-color: ${({theme}) => theme.normal};\r\n  box-shadow: 0 5px ${({theme}) => theme.shadowNormal};\r\n  top: 19px;\r\n  left: 15px;\r\n  left: ${({inversed}) => inversed ? 185 : 15}px;\r\n  \r\n  &.active, :active {\r\n    background-color: ${({theme}) => theme.active};\r\n    box-shadow: 0 3px ${({theme}) => theme.shadowActive};\r\n  }\r\n`;\r\n\r\nSpaceBtn.defaultProps = {\r\n  theme: theme.BASE.controller.buttons.SpaceBtn\r\n};\r\n\r\nconst UpBtn = styled(Move)`\r\n  top: 8px;\r\n  left: ${({inversed}) => 215 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst DownBtn = styled(Move)`\r\n  top: 105px;\r\n  left: ${({inversed}) => 215 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst LeftBtn = styled(Move)`\r\n  top: 58px;\r\n  left: ${({inversed}) => 169 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst RightBtn = styled(Move)`\r\n  top: 58px;\r\n  left: ${({inversed}) => 260 - (inversed ? 154 : 0)}px;\r\n`;\r\n\r\nconst SwitchBtn = styled(Move)`\r\n  border-radius: 90%;\r\n  background: url(${SwitchPNG}) no-repeat;\r\n  padding: 5px;\r\n  background-size: cover;\r\n  top: 8px;\r\n  left: 151.5px;\r\n  width: 25px;\r\n  height: 25px;\r\n  background-origin: content-box;\r\n  background-color: #F1C40F;\r\n  box-shadow: 0 3px #F39C12;\r\n  \r\n  &.active, :active {\r\n    background-color: #F39C12;\r\n    box-shadow: 0 3px #E67E22;\r\n  }\r\n`;\r\n\r\nlet touch = false;\r\nexport const Up = ({ type,\r\n                     pressed,\r\n                     onMouseTouchEvent,\r\n                     inversed\r\n                   }) => (\r\n    <UpBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Down = ({ type,\r\n                       pressed,\r\n                       onMouseTouchEvent,\r\n                       inversed\r\n                     }) => (\r\n    <DownBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Left = ({ type,\r\n                       pressed,\r\n                       onMouseTouchEvent,\r\n                       inversed\r\n                     }) => (\r\n    <LeftBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Right = ({ type,\r\n                        pressed,\r\n                        onMouseTouchEvent,\r\n                        inversed\r\n                      }) => (\r\n    <RightBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Space = ({ type,\r\n                        pressed,\r\n                        onMouseTouchEvent,\r\n                        inversed\r\n                      }) => (\r\n    <SpaceBtn\r\n        inversed={inversed}\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);\r\n\r\nexport const Switch = ({ type,\r\n                        pressed,\r\n                        onMouseTouchEvent,\r\n                       }) => (\r\n    <SwitchBtn\r\n        className={pressed ? 'active' : ''}\r\n        onMouseDown={() => !touch && onMouseTouchEvent(type, true)}\r\n        onMouseUp={() => !touch && onMouseTouchEvent(type, false)}\r\n        onTouchStart={() => {touch = true; onMouseTouchEvent(type, true);}}\r\n        onTouchEnd={() => {touch = true; onMouseTouchEvent(type, false);}}\r\n    />\r\n);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {Up, Left, Right, Down, Space, Switch} from './buttons';\r\n\r\nimport theme from '../../theme';\r\n\r\nimport styled from 'styled-components';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  background-color: ${props => props.theme.background};\r\n  width: 320px;\r\n  height: 160px;\r\n  padding: 5px;\r\n  bottom: 0px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.controller.Controller\r\n};\r\n\r\nlet Controller = ({button, pressed, changeButtonState, playing, inversed}) => (\r\n    <StyledDiv>\r\n      <Up\r\n          inversed={inversed}\r\n          type={'UP'}\r\n          pressed={button === 'UP' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Down\r\n          inversed={inversed}\r\n          type={'DOWN'}\r\n          pressed={button === 'DOWN' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Left\r\n          inversed={inversed}\r\n          type={'LEFT'}\r\n          pressed={button === 'LEFT' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Right\r\n          inversed={inversed}\r\n          type={'RIGHT'}\r\n          pressed={button === 'RIGHT' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      <Space\r\n          inversed={inversed}\r\n          type={'SPACE'}\r\n          pressed={button === 'SPACE' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n      />\r\n      {\r\n        !playing &&\r\n        <Switch\r\n          type={'SWITCH'}\r\n          pressed={button === 'SWITCH' && pressed}\r\n          onMouseTouchEvent={changeButtonState}\r\n        />\r\n      }\r\n    </StyledDiv>\r\n);\r\n\r\nconst mapStateToProps = state => ({...state.controller, ...state.game});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  changeButtonState: (type, pressed) => {\r\n    const action = {type: `${type}_${pressed ? 'TRUE' : 'FALSE'}`};\r\n    return dispatch(action);\r\n  }\r\n});\r\n\r\nController = connect(mapStateToProps, mapDispatchToProps)(Controller);\r\n\r\nexport default Controller;","import React, {Component} from 'react';\r\nimport CountUp from 'react-countup';\r\n\r\nimport styled from 'styled-components';\r\n\r\nimport theme from '../../theme/index';\r\n\r\nconst StyledCountUp = styled(CountUp)`\r\n  display: block;\r\n  font-weight: 700;\r\n  font-family: \"Helvetica Neue\";\r\n  text-align: right;\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  color: ${({theme}) => theme.color}\r\n  bottom: 0px;\r\n  right: 0px;\r\n  line-height: 1;\r\n`;\r\n\r\nStyledCountUp.defaultProps = {\r\n  theme: theme.BASE.infoboard.Counter\r\n};\r\n\r\nexport default class Counter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      begin: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <StyledCountUp\r\n            start={this.state.begin}\r\n            end={this.props.value}\r\n            useEasing={false}\r\n            separator=\",\"\r\n            duration={0.5}\r\n        />\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.value !== this.props.value) {\r\n     this.setState({\r\n       begin: prevProps.value\r\n     })\r\n    }\r\n  }\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport Counter from './Counter';\r\nimport {connect} from 'react-redux';\r\nimport theme from '../../theme/index';\r\n\r\nexport const Label = styled.label`\r\n  display: block;\r\n  font-family: \"Helvetica Neue\";\r\n`;\r\n\r\nexport const Value = styled(Label)`\r\n  text-align: right;\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  color: ${({theme}) => theme.color}\r\n  font-weight: 700;\r\n  bottom: 0px;\r\n  right: 0px;\r\n  line-height: 1;\r\n`;\r\n\r\nValue.defaultProps = {\r\n  theme: theme.BASE.infoboard.components.Value\r\n};\r\n\r\nexport const Title = styled(Label)`\r\n  text-align: left;\r\n  font-weight: 900;\r\n  font-size: ${({theme}) => theme.fontSize}px;\r\n  color: ${({theme}) => theme.color}\r\n`;\r\n\r\nTitle.defaultProps = {\r\n  theme: theme.BASE.infoboard.components.Title\r\n};\r\n\r\nexport const Div = styled.div`\r\n  background: transparent;\r\n  height: 32px;\r\n  margin-bottom: 0px;\r\n`;\r\n\r\nexport const Info = props => (\r\n    <Div>\r\n      <Title>{props.title}</Title>\r\n      <Value>{props.value}</Value>\r\n    </Div>\r\n);\r\n\r\nexport const HighScore = connect(\r\n    ({info}) => ({value: info.highScore})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>HIGH SCORE</Title>\r\n          <Counter value={value}/>\r\n        </Div>\r\n    )\r\n);\r\n\r\nexport const LastScore = connect(\r\n    ({info}) => ({value: info.lastScore})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>LAST SCORE</Title>\r\n          <Counter value={value}/>\r\n        </Div>\r\n    )\r\n);\r\n\r\nexport const NowScore = connect(\r\n    ({info}) => ({value: info.nowScore})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>NOW SCORE</Title>\r\n          <Counter value={value}/>\r\n        </Div>\r\n    )\r\n);\r\n\r\nexport const Speed = connect(\r\n    ({info}) => ({value: info.speed})\r\n)(\r\n    ({value}) => (\r\n        <Div>\r\n          <Title>SPEED</Title>\r\n          <Value>{value}</Value>\r\n        </Div>\r\n    )\r\n);","import styled from 'styled-components';\r\nimport theme from '../../theme/index';\r\n\r\nexport const Cell = styled.div`\r\n  box-sizing: border-box;\r\n  display: inline-block;\r\n  width: 15px;\r\n  height: 15px;\r\n  background-color: ${props => props.theme.mapTypeToColor[props.type]}};\r\n`;\r\n\r\nCell.defaultProps = {\r\n  theme: theme.BASE.block.Cell,\r\n};\r\n\r\n/*\r\nexport const BorderCell = styled.div`\r\n  display: inline-block;\r\n  width: 15px;\r\n  height: 15px;\r\n  border: 0.5px solid black;\r\n  box-sizing: border-box;\r\n  background-color: ${props => mapTypeToColor[props.type]};\r\n`;\r\n*/\r\n\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {Tetromino, BLOCK} from '../../model/Tetromino';\r\nimport {Cell} from './Cell';\r\n\r\n\r\nconst Wrapper = styled.div`\r\n  line-height: 1px;\r\n  text-align: center;\r\n`;\r\nconst Row = styled.div`\r\n  line-height: 1px;\r\n`;\r\n\r\n\r\nexport const NextBlock = ({type = BLOCK.X, rotate = 0, style}) => {\r\n  let shape;\r\n  if (type === BLOCK.X) {\r\n    shape = [[BLOCK.X]];\r\n  } else {\r\n    shape = Tetromino[type].rotate[rotate].shape;\r\n  }\r\n\r\n  return (\r\n      <Wrapper style={style}>\r\n        {\r\n          shape.map((row, y) => (\r\n              <Row key={y}>\r\n                {\r\n                  row.map((cellType, x) => (\r\n                      <Cell key={x} type={shape[y][x]}/>\r\n                  ))\r\n                }\r\n              </Row>\r\n          ) )\r\n        }\r\n      </Wrapper>\r\n  );\r\n};","import React from 'react';\r\nimport {Title} from './components';\r\nimport styled from 'styled-components';\r\n\r\nimport {NextBlock} from '../block/NextBlock';\r\nimport {connect} from 'react-redux';\r\n\r\nimport theme from '../../theme/index'\r\n\r\nconst Div = styled.div`\r\n  background: transparent;\r\n  height: 184px;\r\n`;\r\n\r\nconst Board = styled.div`\r\n  position: relative;\r\n  width: 75px;\r\n  height: 150px;\r\n  top: 7.5px;\r\n  left: 19px;\r\n  background-color: transparent;\r\n  border: 3px dotted ${({theme}) => theme.borderColor};\r\n`;\r\n\r\nBoard.defaultProps = {\r\n  theme: theme.BASE.infoboard.NextBlocks\r\n};\r\n\r\nconst Table = styled.table`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nconst NextBlocks = connect(\r\n    ({block}) => ({next: block.next})\r\n)(\r\n    ({next}) => {\r\n      const nextArr = next.slice(0, 3);\r\n      return (\r\n          <Div>\r\n            <Title>NEXT</Title>\r\n            <Board>\r\n              <Table>\r\n                <tbody>\r\n                {\r\n                  nextArr.map(({type}, i) => (\r\n                      <tr key={i}>\r\n                        <td>\r\n                          <NextBlock type={type}/>\r\n                        </td>\r\n                      </tr>\r\n                  ))\r\n                }\r\n                </tbody>\r\n              </Table>\r\n            </Board>\r\n          </Div>\r\n      )\r\n    }\r\n);\r\n\r\nexport default NextBlocks;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {HighScore, LastScore, NowScore, Speed} from './components';\r\nimport NextBlocks from './NextBlocks';\r\n\r\nimport theme from '../../theme/index';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  right: 10px;\r\n  background: ${({theme}) => theme.background};\r\n  padding: 10px 10px 10px 10px;\r\n  width: 140px;\r\n  height: 300px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.infoboard.InfoBoard\r\n};\r\n\r\n\r\nconst InfoBoard = connect(\r\n    ({game}) => game\r\n)(\r\n    game => {\r\n      return (\r\n          <StyledDiv>\r\n            <HighScore/>\r\n            {!game.playing && <LastScore/>}\r\n            {game.playing && <NowScore/>}\r\n            <Speed/>\r\n            <NextBlocks/>\r\n          </StyledDiv>\r\n      );\r\n    }\r\n);\r\n\r\nexport default InfoBoard;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {Tetromino} from '../../model/Tetromino';\r\nimport {Cell} from './Cell';\r\n\r\n\r\nconst Wrapper = styled.div`\r\n  position: absolute;\r\n  line-height: 1px;\r\n  text-align: center;\r\n  ${({x, y, w, h}) => `\r\n  top: ${y > 0? y * 15 : 0}px;\r\n  left: ${x * 15}px;\r\n  width: ${w * 15}px;\r\n  height: ${h * 15}px;\r\n  `}\r\n`;\r\n\r\nconst Row = styled.div`\r\n  line-height: 1px;\r\n`;\r\n\r\nexport const Block = ({type, rotate, x, y, style}) => {\r\n  const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n  let targetShape = shape;\r\n\r\n  if (y <= -h) { return (null);}\r\n  if (y < 0) {\r\n    targetShape = shape.slice(-y);\r\n  }\r\n\r\n  const blockProps = {type, x, y, w, h: targetShape.length};\r\n\r\n  return (\r\n      <Wrapper {...blockProps} style={style}>\r\n        {\r\n          targetShape.map((row, y) => (\r\n              <Row key={y}>\r\n                {\r\n                  row.map((cellType, x) => (\r\n                      <Cell key={x} type={targetShape[y][x]}/>\r\n                  ))\r\n                }\r\n              </Row>\r\n          ) )\r\n        }\r\n      </Wrapper>\r\n  );\r\n};","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Cell} from '../block/Cell';\r\nimport {Block} from '../block/Block';\r\n\r\nimport theme from '../../theme/index'\r\nimport {BLOCK} from '../../model/Tetromino';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  left: 10px;\r\n  background-color: ${({theme}) => theme.background};\r\n  width: 150px;\r\n  height: 300px;\r\n  ${({hidden}) => `\r\n  display: ${hidden ? 'none' : 'block'}\r\n  `}\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.blackboard.BlackBoard\r\n};\r\n\r\nconst Row = styled.div`\r\n  width: 150px;\r\n  height: 15px;\r\n  line-height: 0px;\r\n`;\r\n\r\nexport const BlockBoard = connect(\r\n    ({block, game}) => ({\r\n      board: block.board,\r\n      now: block.now,\r\n      paused: game.paused,\r\n      playing: game.playing,\r\n    })\r\n)(\r\n    ({board: t, now: block, paused, playing}) => {\r\n      return (\r\n          <StyledDiv hidden={paused}>\r\n            {\r\n              t.map((row, y) => (\r\n                  <Row key={y}>\r\n                    {row.map((type, x) => <Cell key={x} type={!playing && type !== BLOCK.X ? BLOCK.D : type}/>)}\r\n                  </Row>\r\n              ))\r\n            }\r\n            {\r\n              block.type && <Block {...block} />\r\n            }\r\n          </StyledDiv>\r\n      )\r\n    }\r\n);\r\n\r\nexport default BlockBoard;","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport {connect} from 'react-redux';\r\n\r\nimport theme from '../theme/index';\r\n\r\nconst blink = keyframes`\r\n  0%   { opacity: 0; }\r\n  25%  { opacity: 1; }\r\n  75%  { opacity: 1; }\r\n  100% { opacity: 0; }\r\n`;\r\n\r\nconst Label = styled.label`\r\n  position: absolute;\r\n  display: block;\r\n  text-align: CENTER;\r\n  font-size: 1.9em;\r\n  font-family: Lato;\r\n  font-weight: 900;\r\n`;\r\n\r\nconst StyledDiv = styled.div`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  top: 10px;\r\n  left: 10px;\r\n  background-color: ${({theme}) => theme.background};\r\n  width: 150px;\r\n  height: 300px;\r\n`;\r\n\r\nStyledDiv.defaultProps = {\r\n  theme: theme.BASE.Message.PauseMessage\r\n};\r\n\r\nconst StartMsgLb = styled(Label)`\r\n  top: 55px;\r\n  left: 20px;\r\n  width: 130px;\r\n  color: ${({theme}) => theme.color};\r\n  animation: ${blink} 2.5s linear infinite;\r\n`;\r\n\r\nStartMsgLb.defaultProps = {\r\n  theme: theme.BASE.Message.StartMessage\r\n};\r\n\r\nconst PauseMsgLb = styled(Label)`\r\n  top: 120px;\r\n  left: 0px;\r\n  width: 150px;\r\n  color: ${({theme}) => theme.color};\r\n`;\r\n\r\nPauseMsgLb.defaultProps = {\r\n  theme: theme.BASE.Message.PauseMessage\r\n};\r\n\r\nexport const StartMessage = connect(\r\n    ({game}) => game\r\n)(\r\n    game => {\r\n      if (game.state === 'READY') {\r\n        return (\r\n            <StartMsgLb>\r\n              PRESS<br/>SPACE<br/>OR<br/>RED<br/>BUTTON\r\n            </StartMsgLb>\r\n        );\r\n      }\r\n\r\n      return (null);\r\n    }\r\n);\r\n\r\nexport const PauseMessage = connect(\r\n    ({game}) => game\r\n)(\r\n    game => {\r\n      if (game.state === 'PAUSED') {\r\n        return (\r\n            <StyledDiv>\r\n              <PauseMsgLb>\r\n                PAUSED\r\n              </PauseMsgLb>\r\n            </StyledDiv>\r\n        );\r\n      }\r\n\r\n      return (null);\r\n    }\r\n);","import React, { Component } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport Controller from './controller/Controller';\r\nimport InfoBoard from './infoboard/InfoBoard';\r\nimport BlockBoard from './blockboard/BlockBoard';\r\nimport {StartMessage, PauseMessage} from './Message';\r\n\r\nimport theme from '../theme/index'\r\n\r\nconst Scalable = styled.div`\r\n  position: absolute;\r\n  background: ${({theme}) => theme.background};\r\n  top:50%;\r\n  left:50%;\r\n  ${({frameWidth, frameHeight, frameScale}) => `\r\n    width: ${frameWidth}px;\r\n    height: ${frameHeight}px;\r\n    margin: ${- frameHeight / 2}px 0 0 ${- frameWidth / 2}px;\r\n    transform: scale(${frameScale});\r\n  `}\r\n`;\r\n\r\nScalable.defaultProps = {\r\n  theme: theme.BASE.MainFrame,\r\n};\r\n\r\nconst BASE_SIZE = {\r\n  width: 320,\r\n  height: 480,\r\n  ratio: 480/320,\r\n};\r\n\r\nlet resizeTimer;\r\nconst resizeDelay = 100;\r\n\r\nexport default class MainFrame extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.onResizeDebounced = this.onResizeDebounced.bind(this);\r\n    this.state = {\r\n      scale: this.onResizeDebounced(false)\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.onResize);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.onResize);\r\n  };\r\n\r\n  onResize() {\r\n    //Debouncing window.onresize\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(this.onResizeDebounced, resizeDelay);\r\n  }\r\n\r\n  onResizeDebounced(changeState = true) {\r\n    const {width, height, ratio} = BASE_SIZE;\r\n    const {innerWidth, innerHeight} = window;\r\n\r\n    const windowRatio = innerHeight / innerWidth;\r\n    let newScale;\r\n    if (windowRatio <= ratio) {\r\n      newScale = innerHeight / height;\r\n    } else {\r\n      newScale = innerWidth / width;\r\n    }\r\n\r\n    if (changeState) {\r\n      this.setState({\r\n        scale: newScale\r\n      });\r\n    } else {\r\n      return newScale;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <Scalable\r\n          frameWidth={BASE_SIZE.width}\r\n          frameHeight={BASE_SIZE.height}\r\n          frameScale={this.state.scale}\r\n        >\r\n          <InfoBoard/>\r\n          <BlockBoard/>\r\n          <Controller/>\r\n          <StartMessage/>\r\n          <PauseMessage/>\r\n        </Scalable>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n","import { createGlobalStyle } from 'styled-components';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  \r\n`;\r\n\r\nexport default GlobalStyle;","import React from 'react';\r\nimport MainFrame from './component/MainFrame';\r\nimport GlobalStyle from './GlobalStyle';\r\n\r\nconst App = () => (\r\n    <React.Fragment>\r\n      <MainFrame/>\r\n      <GlobalStyle />\r\n    </React.Fragment>\r\n);\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineActions } from 'redux-actions';\r\n\r\nexport function makeCombineActionType (actionCreators) {\r\n  return combineActions.apply(null, [...Object.values(actionCreators)]);\r\n}","import { createActions } from 'redux-actions';\r\n\r\nexport const INVERSE_POSITION = 'INVERSE_POSITION';\r\nconst actionNames = [\r\n  'UP_TRUE',\r\n  'UP_FALSE',\r\n  'DOWN_TRUE',\r\n  'DOWN_FALSE',\r\n  'LEFT_TRUE',\r\n  'LEFT_FALSE',\r\n  'RIGHT_TRUE',\r\n  'RIGHT_FALSE',\r\n  'SPACE_TRUE',\r\n  'SPACE_FALSE',\r\n  INVERSE_POSITION,\r\n];\r\n\r\nconst actionMap = {};\r\n\r\nfor (const actionName of actionNames) {\r\n  actionMap[actionName] = undefined;\r\n}\r\n\r\nexport const buttonAction = createActions(actionMap);\r\n\r\n\r\n\r\n\r\n\r\n","import {createActions} from 'redux-actions';\r\n\r\nexport const PAGE_STATE = {\r\n  ACTIVE: 'ACTIVE',\r\n  PASSIVE: 'PASSIVE',\r\n  HIDDEN: 'HIDDEN',\r\n};\r\n\r\nexport const ACTIVE = `PAGE_STATE/${PAGE_STATE.ACTIVE}`;\r\nexport const PASSIVE = `PAGE_STATE/${PAGE_STATE.PASSIVE}`;\r\nexport const HIDDEN = `PAGE_STATE/${PAGE_STATE.HIDDEN}`;\r\n\r\nconst actionCreator = createActions({\r\n  [ACTIVE]: () => PAGE_STATE.ACTIVE,\r\n  [PASSIVE]: () => PAGE_STATE.PASSIVE,\r\n  [HIDDEN]: () => PAGE_STATE.HIDDEN,\r\n});\r\n\r\nexport const pageStateAction = actionCreator.pageState;","import lifecycle from 'page-lifecycle/dist/lifecycle.es5';\r\nimport { handleAction } from 'redux-actions';\r\nimport {makeCombineActionType} from '../util/util';\r\nimport {\r\n  pageStateAction,\r\n} from '../action/pageState';\r\n\r\nconst { state } = lifecycle;\r\n\r\nexport const pageState = handleAction(\r\n    makeCombineActionType(pageStateAction),\r\n    (state, action) => ({\r\n      old: state.now,\r\n      now: action.payload,\r\n    }),\r\n    {\r\n      old: state,\r\n      now: state,\r\n    }\r\n);","import { handleAction } from 'redux-actions';\r\nimport {makeCombineActionType} from '../util/util';\r\nimport {\r\n  INVERSE_POSITION,\r\n  buttonAction\r\n} from '../action/controller';\r\n\r\nexport const controller = handleAction(\r\n    makeCombineActionType(buttonAction),\r\n    (state, {type}) => {\r\n\r\n      if (type !== INVERSE_POSITION) {\r\n        const s = type.split('_');\r\n        return {\r\n          ...state,\r\n          button: s[0],\r\n          pressed: s[1] === 'TRUE' ? true : false\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          inversed: !state.inversed\r\n        }\r\n      }\r\n    },\r\n    {\r\n      button: null,\r\n      pressed: null,\r\n      inversed: false\r\n    }\r\n);","import { createActions } from 'redux-actions';\r\n\r\nexport const HIGH_SCORE = 'INFO/HIGH_SCORE';\r\nexport const LAST_SCORE = 'INFO/LAST_SCORE';\r\nexport const NOW_SCORE = 'INFO/NOW_SCORE';\r\nexport const SPEED = 'INFO/SPEED';\r\nexport const SPEED_UP = 'INFO/SPEED_UP';\r\nexport const SPEED_DOWN = 'INFO/SPEED_DOWN';\r\n\r\n\r\nconst actionCreator = createActions({\r\n  [HIGH_SCORE]: score => score,\r\n  [LAST_SCORE]: score => score,\r\n  [NOW_SCORE]: (score, highScoreUpdate = true) => ({score, highScoreUpdate}),\r\n  [SPEED]: speed => speed,\r\n  [SPEED_UP]: undefined,\r\n  [SPEED_DOWN]: undefined,\r\n});\r\n\r\nexport const infoAction = actionCreator.info;","import { handleActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport {\r\n  HIGH_SCORE,\r\n  LAST_SCORE,\r\n  NOW_SCORE,\r\n  SPEED,\r\n  SPEED_UP,\r\n  SPEED_DOWN\r\n} from '../action/info';\r\n\r\nexport const info = handleActions(\r\n    {\r\n      [HIGH_SCORE]: (state, {payload}) =>\r\n          update(state, {\r\n            highScore: {$set: payload}\r\n          }),\r\n      [LAST_SCORE]: (state, {payload}) =>\r\n          update(state, {\r\n            lastScore: {$set: payload}\r\n          }),\r\n      [NOW_SCORE]: (state, {payload: {score, highScoreUpdate}}) => {\r\n        const updateObj = {\r\n          nowScore: {$set: score}\r\n        };\r\n        if (highScoreUpdate && state.highScore < score) {\r\n          updateObj['highScore'] = {$set: score};\r\n        }\r\n\r\n        return update(state, updateObj);\r\n      },\r\n      [SPEED]: (state, {payload}) =>\r\n          update(state, {\r\n            speed: {$set: payload}\r\n          }),\r\n      [SPEED_UP]: state =>\r\n          update(state, {\r\n            speed: {$set: state.speed + 1}\r\n          }),\r\n      [SPEED_DOWN]: state =>\r\n          update(state, {\r\n            speed: {$set: state.speed - 1}\r\n          }),\r\n    },\r\n    {\r\n      highScore: 0,\r\n      lastScore: 0,\r\n      nowScore: 0,\r\n      speed: 1,\r\n    }\r\n);","import { createActions } from 'redux-actions';\r\nimport {NORMAL_TYPES} from '../model/Tetromino';\r\n\r\nexport const DOWN = 'BLOCK/DOWN';\r\nexport const LEFT = 'BLOCK/LEFT';\r\nexport const RIGHT = 'BLOCK/RIGHT';\r\nexport const ROTATE = 'BLOCK/ROTATE';\r\nexport const DROP = 'BLOCK/DROP';\r\nexport const PUSH_NEXT = 'BLOCK/PUSH_NEXT';\r\nexport const SHIFT_NEXT = 'BLOCK/SHIFT_NEXT';\r\nexport const COMMIT = 'BLOCK/COMMIT';\r\nexport const ROW_CLEAR = 'BLOCK/ROW_CLEAR';\r\nexport const CLEAR = 'BLOCK/CLEAR';\r\n\r\nconst actionCreator = createActions({\r\n  [DOWN]: undefined,\r\n  [LEFT]: undefined,\r\n  [RIGHT]: undefined,\r\n  [ROTATE]: undefined,\r\n  [DROP]: undefined,\r\n  [PUSH_NEXT] : () => {\r\n    const blocks = NORMAL_TYPES.slice(0);\r\n    const randomBlocks = [];\r\n    while (blocks.length > 0) {\r\n      randomBlocks.push({\r\n        type: // 피셔-예이츠 셔플\r\n            blocks.splice(\r\n                Math.floor(Math.random() * blocks.length),\r\n                1\r\n            )[0],\r\n        rotate: 0\r\n      });\r\n    }\r\n    return {blocks: randomBlocks};\r\n  },\r\n  [SHIFT_NEXT]: undefined,\r\n  [COMMIT]: undefined,\r\n  [ROW_CLEAR]: rows => ({rows: Array.isArray(rows) ? rows : [rows]}),\r\n  [CLEAR]: undefined,\r\n});\r\n\r\nexport const blockAction = actionCreator.block;\r\n","import { handleActions, combineActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport {\r\n  DOWN,\r\n  LEFT,\r\n  RIGHT,\r\n  ROTATE,\r\n  DROP,\r\n  PUSH_NEXT,\r\n  SHIFT_NEXT,\r\n  COMMIT,\r\n  ROW_CLEAR,\r\n  CLEAR,\r\n  blockAction,\r\n} from '../action/block';\r\nimport {Tetromino, BLOCK} from '../model/Tetromino';\r\nconst {down, left, right} = blockAction;\r\n\r\nconst getClearBoard = (defaultValue = BLOCK.X) => {\r\n  const t = [];\r\n  for (let y = 0; y < 20; y++) {\r\n    t.push(new Array(10).fill(defaultValue));\r\n  }\r\n\r\n  return t;\r\n};\r\n\r\n/*const types = 'XDIOTJLSZ';\r\nconst getRandomType = () => types[Math.floor(Math.random() * 7)];\r\nconst getRandomBoard = () => {\r\n  const t = [];\r\n  for (let y = 0; y < 20; y++) {\r\n    t.push([]);\r\n    for (let x = 0; x < 10; x++) {\r\n      t[y].push(getRandomType());\r\n    }\r\n  }\r\n  return t;\r\n};*/\r\n\r\nconst defaultState = {\r\n  board: getClearBoard(),\r\n  now: {\r\n    type: null,\r\n    rotate: null,\r\n    x: null,\r\n    y: null,\r\n  },\r\n  committed: {\r\n    type: null,\r\n    rotate: null,\r\n    x: null,\r\n    y: null,\r\n  },\r\n  cachedCollisionCheck: {\r\n    [LEFT]: false,\r\n    [DOWN]: false,\r\n    [RIGHT]: false,\r\n    [ROTATE]: false\r\n  },\r\n  next: [\r\n    /*{\r\n      type: null,\r\n      rotate: null,\r\n    }*/\r\n  ],\r\n};\r\n\r\nexport const collisionCheck = (state, actionType) => {\r\n  const {now : {type, rotate, x, y}, board} = state;\r\n  const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n  const boardWidth = board[0].length,\r\n      boardHeight = board.length;\r\n\r\n  let dx = 0, dy = 0, cx, cy;\r\n  switch (actionType) {\r\n    case LEFT:\r\n      dx = -1;\r\n      cx = x + dx;\r\n      if (cx < 0) {\r\n        // 보드 외곽(왼쪽) 과의 충돌 확인됨\r\n        return false;\r\n      }\r\n      break;\r\n    case RIGHT:\r\n      dx = 1;\r\n      cx = x + w - 1 + dx;\r\n      if (cx >= boardWidth) {\r\n        // 보드 외곽(오른쪽) 과의 충돌 확인됨\r\n        return false;\r\n      }\r\n      break;\r\n    case DOWN:\r\n      dy = 1;\r\n      cy = y + h - 1 + dy;\r\n      if (cy >= boardHeight) {\r\n        // 보드 외곽(바닥)과의 충돌 확인됨\r\n        return false;\r\n      }\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n\r\n  for (let iy = 0; iy < h; iy++) {\r\n    for (let jx = 0; jx < w; jx++) {\r\n\r\n      // 내 블록 영역상 빈 블록이면 통과\r\n      if (shape[iy][jx] === BLOCK.X) {\r\n        continue;\r\n      }\r\n\r\n      // 충돌 검사하려는 셀이 아직 내 블록 안쪽이라면 통과\r\n      if (\r\n          (iy + dy) < h\r\n          && (jx + dx) >= 0\r\n          && (jx + dx) < w\r\n          && shape[iy + dy][jx + dx] === type\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      // 충돌 검사하려는 셀이 화면 상단이면 통과\r\n      if (y + iy + dy < 0) {\r\n        continue;\r\n      }\r\n\r\n      // 충돌 검사하려는 셀이 비어있다면 통과\r\n      if (board[y + iy + dy][x + jx + dx] === BLOCK.X) {\r\n        continue;\r\n      }\r\n\r\n      // 다른 block과의 충돌 확인됨\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // 이동할 방향의 모든 셀에서 충돌 확인 안됨. 이동 가능\r\n  return true;\r\n};\r\n\r\nexport const rotateCollisionCheck = state => {\r\n  const {now : {type, rotate, x, y}, board} = state;\r\n  const {maxRotate} = Tetromino[type];\r\n  const nextRotate = (rotate + 1) % (maxRotate + 1);\r\n  const {shape, w, h, dx, dy} = Tetromino[type].rotate[nextRotate];\r\n\r\n  // rotate 후 새 블록 위치가 보드 경계를 넘어서면 안쪽으로 밀어 넣는다.\r\n  const\r\n      boardWidth = board[0].length,\r\n      boardHeight = board.length;\r\n\r\n  let newDx, newDy;\r\n\r\n  if (x + dx < 0) {\r\n    newDx = -x;\r\n  } else if ((x + dx + w - 1) >= boardWidth) {\r\n    newDx = boardWidth - w - x;\r\n  } else {\r\n    newDx = dx;\r\n  }\r\n\r\n  if ((y + dy + h) >= boardHeight) {\r\n    newDy = boardHeight - h - y;\r\n  } else {\r\n    newDy = dy;\r\n  }\r\n\r\n  // cx, cy = 1차 보정 된 rotate 후 새 블록 위치\r\n  let cx = x + newDx,\r\n      cy = y + newDy;\r\n\r\n  let ty = 0, collapsed;\r\n\r\n  //board의 rotate 전 내 블록 셀을 isBefore에 모두 기록\r\n  const {\r\n    shape: _shape,\r\n    w: _w,\r\n    h: _h,\r\n  } = Tetromino[type].rotate[rotate];\r\n\r\n  const isBefore = {};\r\n  for (let iy = 0; iy < _h; iy++) {\r\n    for (let jx = 0; jx < _w; jx++) {\r\n      if (_shape[iy][jx] === type) {\r\n        isBefore[`${iy + y},${jx + x}`] = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  while (ty >= -2) {\r\n    collapsed = false;\r\n\r\n    for (let iy = 0; iy < h; iy++) {\r\n      if (collapsed) break;\r\n      for (let jx = 0; jx < w; jx++) {\r\n        // 내 블록 영역상 빈 블록이면 통과\r\n        if (shape[iy][jx] === BLOCK.X) {\r\n          continue;\r\n        }\r\n\r\n        // 충돌 검사하려는 셀이 화면 상단이면 통과\r\n        if (iy + cy + ty < 0) {\r\n          continue;\r\n        }\r\n\r\n        // rotate 시킬 셀이 비었으면 통과\r\n        if (board[iy + cy + ty][jx + cx] === BLOCK.X) {\r\n          continue;\r\n        } else {\r\n          collapsed = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (collapsed) {\r\n      if (ty > -2) {\r\n        ty--;\r\n        continue;\r\n      } else {\r\n        return {result: false};\r\n      }\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  // 회전할 방향의 모든 셀에서 충돌 확인 안됨. 이동 가능\r\n  return {\r\n    result: true,\r\n    dx: newDx,\r\n    dy: newDy + ty,\r\n    rotate: nextRotate\r\n  }\r\n};\r\n\r\nexport const getDropPositionY = state => {\r\n  const {now : {type, rotate, x, y}, board} = state;\r\n  const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n  let maxK = board.length - (y + h);\r\n  for (let jx = 0; jx < w; jx++) {\r\n    for (let iy = h - 1; iy >= 0; iy--) {\r\n      // 내 블록 영역상 빈 블록이면 통과\r\n      if (shape[iy][jx] === BLOCK.X) {\r\n        continue;\r\n      }\r\n\r\n      // 대상 셀부터 수직으로 내려가며 충돌 확인\r\n      // 최소값까지만 확인함.\r\n      for (let k = 1; k <= maxK; k++) {\r\n\r\n        // 충돌 검사하려는 셀이 아직 내 블록 안쪽이라면 통과\r\n        if (\r\n            iy + k < h\r\n            && shape[iy + k][jx] === type\r\n        ) {\r\n          continue;\r\n        }\r\n\r\n        // 충돌 검사하려는 셀이 화면 상단이면 통과\r\n        if (y + iy + k < 0) {\r\n          continue;\r\n        }\r\n\r\n        // 충돌 검사하려는 셀이 비어있다면 통과\r\n        if (board[y + iy + k][x + jx] === BLOCK.X) {\r\n          continue;\r\n        }\r\n\r\n        if (k - 1 === 0) {\r\n          return 0; // 0이면 (못 내려감) 더 확인할 필요 없으므로 종료.\r\n        }\r\n\r\n        if (k - 1 < maxK) {\r\n          maxK = k - 1; // 최솟값 갱신\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return maxK;\r\n};\r\n\r\nexport const block = handleActions(\r\n    {\r\n\r\n      [combineActions(down, left, right)]:\r\n          (state, {type: actionType}) => {\r\n            if (state.cachedCollisionCheck[actionType]) {\r\n              return state;\r\n            }\r\n            if (collisionCheck(state, actionType) === false) {\r\n              return update(state, {\r\n                cachedCollisionCheck: {\r\n                  [actionType] : {$set: true}\r\n                }\r\n              });\r\n            } else {\r\n              const {x, y, type} = state.now;\r\n              const nextNow = {...state.now};\r\n\r\n              switch (actionType) {\r\n                case DOWN:\r\n                  nextNow.y = y + 1;\r\n                  break;\r\n                case LEFT:\r\n                  nextNow.x = x - 1;\r\n                  break;\r\n                case RIGHT:\r\n                  nextNow.x = x + 1;\r\n                  break;\r\n                default:\r\n                  return state;\r\n              }\r\n\r\n              return update(state, {\r\n                now: {$set: nextNow},\r\n                cachedCollisionCheck: {$set : {\r\n                    [LEFT]: false,\r\n                    [DOWN]: false,\r\n                    [RIGHT]: false,\r\n                    [ROTATE]: Tetromino[type].maxRotate === 0\r\n                  }}\r\n              });\r\n            }\r\n          },\r\n\r\n      [ROTATE]: state => {\r\n        if (state.cachedCollisionCheck[ROTATE]) {\r\n          return state;\r\n        }\r\n\r\n        const {result, dx, dy, rotate} = rotateCollisionCheck(state);\r\n        if (result === false) {\r\n          return update(state, {\r\n            cachedCollisionCheck: {\r\n              [ROTATE] : {$set: true}\r\n            }\r\n          });\r\n        }\r\n\r\n        const {x, y, type} = state.now;\r\n        const nextNow = {\r\n          type, rotate,\r\n          x: x + dx,\r\n          y: y + dy,\r\n        };\r\n\r\n        return update(state, {\r\n          now: {$set: nextNow},\r\n          cachedCollisionCheck: {$set : {\r\n              [LEFT]: false,\r\n              [DOWN]: false,\r\n              [RIGHT]: false,\r\n              [ROTATE]: Tetromino[type].maxRotate === 0\r\n            }}\r\n        });\r\n\r\n\r\n      },\r\n\r\n      [DROP]: state => update(state, {\r\n        now: {\r\n          y: {$set: state.now.y + getDropPositionY(state)},\r\n        },\r\n        cachedCollisionCheck: {$set : {\r\n            [LEFT]: false,\r\n            [DOWN]: false,\r\n            [RIGHT]: false,\r\n            [ROTATE]: false\r\n          }}\r\n      }),\r\n\r\n      [PUSH_NEXT]: (state, {payload: {blocks}}) => update(state, {\r\n        next: {$push: blocks}\r\n      }),\r\n\r\n      [SHIFT_NEXT]: state => {\r\n        const {next: [newBlock]} = state;\r\n\r\n        const newNow = {\r\n          type: newBlock.type,\r\n          rotate: newBlock.rotate,\r\n          x: 4,\r\n          y: -Tetromino[newBlock.type].rotate[newBlock.rotate].h,\r\n        };\r\n\r\n        return update(state, {\r\n          now: {$set: newNow},\r\n          next: {$splice: [[0, 1]]},\r\n          cachedCollisionCheck: {$set : {\r\n              [LEFT]: false,\r\n              [DOWN]: false,\r\n              [RIGHT]: false,\r\n              [ROTATE]: Tetromino[newBlock.type].maxRotate === 0\r\n            }},\r\n          committed: {$set: {\r\n              type: null,\r\n              rotate: null,\r\n              x: null,\r\n              y: null,\r\n            }}\r\n        });\r\n      },\r\n\r\n      [COMMIT]: state => {\r\n        const {type, rotate, x, y} = state.now;\r\n        const {shape, w, h} = Tetromino[type].rotate[rotate];\r\n\r\n        let cx, cy, updateObj = null;\r\n        for (let iy = 0; iy < h; iy++) {\r\n          cy = iy + y;\r\n          if (cy < 0) {\r\n            continue;\r\n          }\r\n\r\n          for (let jx = 0; jx < w; jx++) {\r\n            if (shape[iy][jx] === BLOCK.X) {\r\n              continue;\r\n            }\r\n\r\n            cx = jx + x;\r\n            if (updateObj === null) {\r\n              updateObj = {};\r\n            }\r\n\r\n            if (!updateObj[cy]) {\r\n              updateObj[cy] = {}\r\n            }\r\n\r\n            updateObj[cy][cx] = {$set: type};\r\n          }\r\n        }\r\n\r\n        if (updateObj === null) {\r\n          return update(state, {\r\n            committed: {$set: {...state.now}},\r\n            now: {$set: {\r\n                type: null,\r\n                rotate: null,\r\n                x: null,\r\n                y: null,\r\n              }}\r\n          });\r\n        }\r\n\r\n        return update(state, {\r\n          board: updateObj,\r\n          committed: {$set: {...state.now}},\r\n          now: {$set: {\r\n              type: null,\r\n              rotate: null,\r\n              x: null,\r\n              y: null,\r\n            }}\r\n        });\r\n      },\r\n\r\n      [ROW_CLEAR]: (state, {payload: {rows}}) => {\r\n\r\n        const {board} = state;\r\n        const rowClearedBoard = [];\r\n        const boardWidth = board[0].length;\r\n        const boardHeight = board.length;\r\n\r\n        for (let i = 0; i < boardHeight; i++) {\r\n          if (rows.includes(i)) {\r\n            rowClearedBoard.unshift(new Array(boardWidth).fill(BLOCK.X))\r\n          } else {\r\n            rowClearedBoard.push(board[i])\r\n          }\r\n        }\r\n\r\n        return update(state, {\r\n          board: {$set: rowClearedBoard}\r\n        });\r\n      },\r\n\r\n      [CLEAR]: () => ({...defaultState}),\r\n    },\r\n    {...defaultState}\r\n);","import { createActions } from 'redux-actions';\r\n\r\nexport const READY = 'READY';\r\nexport const PAUSED = 'PAUSED';\r\nexport const RESUMED = 'RESUMED';\r\nexport const GAME_IS_ON = 'GAME_IS_ON';\r\n\r\nexport const gameAction = createActions({\r\n  [GAME_IS_ON]: undefined,\r\n  [READY]: undefined,\r\n  [PAUSED]: undefined,\r\n  [RESUMED]: undefined,\r\n});","import { handleActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport {makeCombineActionType} from '../util/util';\r\n\r\nimport {\r\n  READY,\r\n  GAME_IS_ON,\r\n  PAUSED,\r\n  RESUMED,\r\n  gameAction,\r\n} from '../action/game';\r\n\r\nconst mapActionToState = {\r\n  [READY]: {\r\n    playing: false,\r\n    paused: false,\r\n  },\r\n  [GAME_IS_ON]: {\r\n    playing: true,\r\n    paused: false,\r\n  },\r\n  [PAUSED]: {\r\n    playing: true,\r\n    paused: true,\r\n  },\r\n  [RESUMED]: {\r\n    playing: true,\r\n    paused: false,\r\n  }\r\n\r\n};\r\n\r\nexport const game = handleActions(\r\n    {\r\n      [makeCombineActionType(gameAction)]: (state, {type}) => {\r\n        return update(state, {$set: {\r\n            ...mapActionToState[type],\r\n            state: type,\r\n          }})\r\n      }\r\n    },\r\n    {\r\n      state: 'READY',\r\n      playing: false,\r\n      paused: false,\r\n    }\r\n);","import { combineReducers } from 'redux';\r\nimport { pageState } from './pageState';\r\nimport { controller } from './controller';\r\nimport { info } from './info';\r\nimport { block } from './block';\r\nimport { game } from './game';\r\n\r\nexport default combineReducers({\r\n  pageState,\r\n  controller,\r\n  info,\r\n  block,\r\n  game,\r\n});\r\n","import { eventChannel } from 'redux-saga';\r\nimport { call, take, cancelled, put } from 'redux-saga/effects';\r\nimport lifecycle from 'page-lifecycle/dist/lifecycle.es5';\r\n\r\nimport {pageStateAction} from '../action/pageState';\r\n\r\nconst takeEventNames = ['active', 'passive', 'hidden'];\r\n\r\nconst makelifeCycleChannel = () => eventChannel(emit => {\r\n  const handler = event => {\r\n    if (takeEventNames.includes(event.newState)) {\r\n      emit(event.newState);\r\n    }\r\n  };\r\n\r\n  lifecycle.addEventListener('statechange', handler);\r\n\r\n  const unsubscribe = () => lifecycle.removeEventListener('statechange', handler);\r\n\r\n  return unsubscribe;\r\n});\r\n\r\nexport function* pageStateSaga() {\r\n  const chan = yield call(makelifeCycleChannel);\r\n  try {\r\n    while (true) {\r\n      yield put(pageStateAction[yield take(chan)]());\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      chan.close();\r\n    }\r\n  }\r\n}","import { eventChannel } from 'redux-saga';\r\nimport { call, take, cancelled, put } from 'redux-saga/effects';\r\n\r\nconst keyboardEvents = ['keydown', 'keyup'];\r\n\r\nconst KEYCODE_BUTTON_MAP = {\r\n  38: 'UP',\r\n  40: 'DOWN',\r\n  37: 'LEFT',\r\n  39: 'RIGHT',\r\n  32: 'SPACE',\r\n  13: 'ENTER',\r\n};\r\n\r\nconst makeKeyboardChannel = () => eventChannel(emit => {\r\n\r\n  let throttled = false;\r\n  let throttleDelay = 20;\r\n\r\n  const handler = e => {\r\n    if (e.type === 'keydown') {\r\n      if (throttled) return;\r\n      throttled = true;\r\n      setTimeout(() => {\r\n        throttled = false;\r\n      }, throttleDelay);\r\n    }\r\n\r\n    throttledHandler(e);\r\n  };\r\n\r\n  const throttledHandler = ({type, keyCode, which}) => {\r\n    let key = keyCode || which || null;\r\n    if (!key) return;\r\n\r\n    const pressed = type === 'keydown'?\r\n        true\r\n        : type === 'keyup'?\r\n            false\r\n            : null;\r\n\r\n    if (pressed === null) return;\r\n\r\n    key = KEYCODE_BUTTON_MAP[key];\r\n    if (typeof key === 'string') {\r\n      emit({key, pressed});\r\n    }\r\n  };\r\n\r\n  for (const eventName of keyboardEvents) {\r\n    window.addEventListener(eventName, handler);\r\n  }\r\n\r\n  const unsubscribe = () => {\r\n    for (const eventName of keyboardEvents) {\r\n      window.removeEventListener(eventName, handler);\r\n    }\r\n  };\r\n\r\n  return unsubscribe;\r\n});\r\n\r\nexport function* keyboardSaga() {\r\n  const chan = yield call(makeKeyboardChannel);\r\n  try {\r\n    while (true) {\r\n      const {key, pressed} = yield take(chan);\r\n      const action = {type: `${key}_${pressed ? 'TRUE' : 'FALSE'}`};\r\n      yield put(action);\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      chan.close();\r\n    }\r\n  }\r\n}","import {select, cancel, put, take, call, race, fork} from 'redux-saga/effects';\r\nimport {delay} from 'redux-saga';\r\n\r\nimport {infoAction} from '../../action/info';\r\nimport {\r\n  DOWN,\r\n  LEFT,\r\n  RIGHT,\r\n  ROTATE,\r\n  DROP,\r\n  SHIFT_NEXT,\r\n  blockAction,\r\n} from '../../action/block';\r\nimport {\r\n  gameAction,\r\n  PAUSED,\r\n  RESUMED,\r\n} from '../../action/game';\r\nimport {ACTIVE, HIDDEN} from '../../action/pageState';\r\nimport {Tetromino, BLOCK} from '../../model/Tetromino';\r\n\r\nconst mapInputToAction = {\r\n  'UP_TRUE': ROTATE,\r\n  'DOWN_TRUE': DOWN,\r\n  'LEFT_TRUE': LEFT,\r\n  'RIGHT_TRUE': RIGHT,\r\n  'SPACE_TRUE': DROP,\r\n};\r\n\r\nfunction* handleInput() {\r\n  while (true) {\r\n    const {type} = (yield race([\r\n      take('UP_TRUE'),\r\n      take('DOWN_TRUE'),\r\n      take('LEFT_TRUE'),\r\n      take('RIGHT_TRUE'),\r\n      take('SPACE_TRUE'),\r\n    ])).filter(v => v)[0];\r\n    yield put({\r\n      type: mapInputToAction[type]\r\n    });\r\n  }\r\n}\r\n\r\nfunction* blockMovePhase(timeoutMs) {\r\n  const inputTask = yield fork(handleInput);\r\n  const raceResult = yield race([\r\n    take(DROP),\r\n    delay(timeoutMs),\r\n    take(PAUSED),\r\n  ]);\r\n  yield cancel(inputTask);\r\n\r\n  if (raceResult[0]) {\r\n    return 'drop';\r\n  } else if (raceResult[1]) {\r\n    return 'timeout';\r\n  } else if (raceResult[2]) {\r\n    return 'paused';\r\n  } else {\r\n    return 'passed';\r\n  }\r\n}\r\n\r\nfunction* timeoutDown() {\r\n  const bY = yield select(({block}) => block.now.y);\r\n  yield put(blockAction.down());\r\n  const nY = yield select(({block}) => block.now.y);\r\n\r\n  return bY !== nY;\r\n}\r\n\r\nfunction* onGameover () {\r\n  // lastScore에 지난 게임 점수 등록\r\n  const state = yield select();\r\n\r\n  yield put(infoAction.lastScore(state.info.nowScore));\r\n  yield put(infoAction.nowScore(0, false));\r\n}\r\n\r\nexport default function* () {\r\n  const asyncTask = yield fork(function* () {\r\n    while (true) {\r\n      yield take(SHIFT_NEXT);\r\n      const {next} = yield select(({block}) => block);\r\n      if (next.length < 10) {\r\n        yield put(blockAction.pushNext());\r\n      }\r\n    }\r\n  });\r\n\r\n  let isPaused = false;\r\n  let clearLine = {\r\n    all: 0,\r\n    bonus: 0,\r\n    block: 0\r\n  };\r\n\r\n  const pauseToggle = yield fork(function* () {\r\n    while (true) {\r\n      const _race = yield race([\r\n        take('ENTER_TRUE'),\r\n        take(ACTIVE),\r\n        take(HIDDEN),\r\n      ]);\r\n\r\n      if (_race[0]) {\r\n        if (isPaused === false) {\r\n          yield put(gameAction.paused());\r\n        } else {\r\n          yield put(gameAction.resumed());\r\n        }\r\n        isPaused = !isPaused;\r\n      } else if (_race[1] && isPaused) {\r\n        yield put(gameAction.resumed());\r\n        isPaused = !isPaused;\r\n      } else if (_race[2] && !isPaused) {\r\n        yield put(gameAction.paused());\r\n        isPaused = !isPaused;\r\n      }\r\n    }\r\n  });\r\n\r\n  while (true) {\r\n    if (isPaused) {\r\n      yield take(RESUMED);\r\n    }\r\n    let firstTimeoutDownFail = false;\r\n    let isDropped = false;\r\n    const speed = yield select(({info}) => info.speed);\r\n    let timeoutMs = Math.floor(1000 * Math.pow(0.72, speed - 1));\r\n    yield put(blockAction.shiftNext());\r\n\r\n    let elapsedToCommit = 0, start, end;\r\n\r\n    start = new Date().getTime();\r\n    while (true) {\r\n      if (isPaused) {\r\n        yield take(RESUMED);\r\n      }\r\n      let result = yield call(blockMovePhase, timeoutMs);\r\n\r\n      if (result === 'paused') {\r\n        yield take(RESUMED);\r\n        result = yield call(blockMovePhase, timeoutMs);\r\n      } else if (result === 'pass') {\r\n        continue;\r\n      } if (result === 'drop') {\r\n        isDropped = true;\r\n        break;\r\n      }\r\n\r\n      let timeoutDownResult = yield call(timeoutDown);\r\n\r\n      if (timeoutDownResult === false) {\r\n        if (firstTimeoutDownFail) {\r\n          break;\r\n        }\r\n\r\n        firstTimeoutDownFail = true;\r\n        // 커밋 타임아웃은 speed가 올라갈수록 오히려 증가시켜 기회를 더 줌\r\n        timeoutMs = 150 * speed;\r\n      } else {\r\n        firstTimeoutDownFail = false;\r\n        timeoutMs = Math.floor(1000 * Math.pow(0.72, speed - 1));\r\n      }\r\n    }\r\n    end = new Date().getTime();\r\n    elapsedToCommit = end - start;\r\n    yield put(blockAction.commit());\r\n\r\n\r\n    // 커밋 후 처리\r\n    const state = yield select();\r\n\r\n    // 게임 오버 판단\r\n    const {type, rotate, y} = state.block.committed;\r\n    const {h} = Tetromino[type].rotate[rotate];\r\n    if (y + h <= 0) {\r\n      break;\r\n    }\r\n\r\n    // 꽉 차서 삭제할 줄 계산\r\n    const {board} = state.block;\r\n    const clearLineArr = [];\r\n    clearLine.block = 0;\r\n    let isLineFull;\r\n\r\n    for (let iy = y; iy < y + h; iy++) {\r\n      if (iy < 0) {\r\n        continue;\r\n      }\r\n      isLineFull = !board[iy].some(v => v === BLOCK.X);\r\n      if (isLineFull) {\r\n        clearLine.block++;\r\n        clearLineArr.push(iy);\r\n      }\r\n    }\r\n\r\n    // 점수 계산\r\n    const\r\n        // speed 별 기본 점수\r\n        speedBase = 200 * speed,\r\n\r\n        // 3초 이내로 commit 시킨 경우 비례하여 최대 200%의 기본 점수 가산\r\n        fast = elapsedToCommit > 3000 ? 1 : 2 - (elapsedToCommit / 3000),\r\n\r\n        // drop으로 commit 시킨 경우 획득 점수의 20% 가산\r\n        drop = isDropped ? 1.2 : 1,\r\n\r\n        // 개별 블록 점수\r\n        blockScore = speedBase * fast * drop,\r\n\r\n        // 최종 점수: 개별 블록 점수 * (삭제된 줄 수 + 1)\r\n        finalScore = Math.floor(blockScore * (clearLine.block + clearLine.bonus + 1));\r\n\r\n    // 점수 및 줄 삭제 업데이트\r\n    yield put(infoAction.nowScore(state.info.nowScore + finalScore));\r\n\r\n    if (clearLine.block > 0) {\r\n      clearLine.bonus += clearLine.block;\r\n      clearLine.all += clearLine.block;\r\n      yield put(blockAction.rowClear(clearLineArr));\r\n    } else {\r\n      clearLine.bonus = 0;\r\n    }\r\n\r\n\r\n    const nowSpeed = yield select(state => state.info.speed);\r\n\r\n    // 10줄 클리어 할 때마다 speed 증가\r\n    if (nowSpeed < 10 && clearLine.all > nowSpeed * 10) {\r\n      yield put(infoAction.speedUp());\r\n    }\r\n\r\n  }\r\n\r\n  yield cancel(asyncTask);\r\n  yield cancel(pauseToggle);\r\n  yield call(onGameover);\r\n}","import {all, select, cancel, put, take, takeEvery, call} from 'redux-saga/effects';\r\n\r\nimport {\r\n  READY,\r\n  GAME_IS_ON,\r\n  gameAction\r\n} from '../../action/game';\r\n\r\nimport {infoAction} from '../../action/info';\r\nimport {blockAction} from '../../action/block';\r\n\r\nimport {\r\n  buttonAction\r\n} from '../../action/controller';\r\n\r\nimport playing from './playing';\r\n\r\nfunction* onReady() {\r\n  yield all([\r\n      yield takeEvery('LEFT_TRUE', function* () {\r\n        const {speed} = yield select(state => state.info);\r\n        if (speed > 1) {\r\n          yield put(infoAction.speedDown());\r\n        }\r\n      }),\r\n      yield takeEvery('RIGHT_TRUE', function* () {\r\n        const {speed} = yield select(state => state.info);\r\n        if (speed < 10) {\r\n          yield put(infoAction.speedUp());\r\n        }\r\n      }),\r\n      yield takeEvery('SWITCH_FALSE', function* () {\r\n        yield put(buttonAction.inversePosition())\r\n      }),\r\n      yield take('SPACE_TRUE', function* () {\r\n      })\r\n  ]);\r\n\r\n  yield put(gameAction.gameIsOn());\r\n  yield cancel();\r\n}\r\n\r\nfunction* onGame() {\r\n  yield call(initialize);\r\n  yield call(playing);\r\n  yield call(end);\r\n}\r\n\r\nfunction* initialize() {\r\n  yield put(infoAction.nowScore(0, false));\r\n  yield put(blockAction.clear());\r\n  yield put(blockAction.pushNext());\r\n}\r\n\r\nfunction* end() {\r\n  yield put(infoAction.speed(1));\r\n  yield put(gameAction.ready());\r\n}\r\n\r\nexport default function* () {\r\n  yield all([\r\n    yield takeEvery(READY, onReady),\r\n    yield takeEvery(GAME_IS_ON, onGame),\r\n  ]);\r\n  yield call(onReady);\r\n}","import {fork, all} from 'redux-saga/effects';\r\n\r\nimport {pageStateSaga} from './pageState';\r\nimport {keyboardSaga} from './controller';\r\nimport gameSaga from './game/game';\r\n\r\nexport default function* () {\r\n  yield fork(pageStateSaga);\r\n  yield fork(keyboardSaga);\r\n  yield all([\r\n      gameSaga(),\r\n  ]);\r\n}","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootReducer from '../reducer/index';\r\nimport rootSaga from '../saga/index';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst composeEnhancers =\r\n    typeof window === 'object' &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n          // Specify extension’s options like name, actionsBlacklist, actionsCreators, serialize...\r\n        }) : compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n    applyMiddleware(sagaMiddleware),\r\n);\r\n\r\nconst store = createStore(rootReducer, /* preloadedState, */ enhancer);\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\n/*store.subscribe(() => {\r\n  console.dir(store.getState());\r\n});*/\r\n\r\nexport default store;","import \"@babel/polyfill\";\r\nimport React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from './store/index';\r\n\r\nrender(\r\n    <Provider store={store}>\r\n      <App/>\r\n    </Provider>\r\n    , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}